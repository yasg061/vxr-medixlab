<html>

<head>
  <title>Vertex Medixlab</title>
  <!-- Replace "../build.js" with the super-hands and
         A-Frame distributions to run : -->
  <script src="../../super/build.js"></script>
  <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
  <!-- <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script> -->

  <!-- Networked aframe -->

  <script>
    let url = "../../js/structureEntitiesProcess2.json"
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
  <script src="/easyrtc/easyrtc.js"></script>
  <script src="/dist/networked-aframe.js"></script>
  <script
    src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
  <script src="/js/spawn-in-circle.component.js"></script>

  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>


  <!-- Super hands -->
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.js"></script>
  <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
  <script
    src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <!-- ownership transfer dependencies -->

  <script src="../../js/spawner.component.js"></script>
  <script src="../../js/toggle-physics.component.js"></script>
  <script src="../../js/rotator.component.js"></script>
  <script src="../../js/input.component.js"></script>
  <script src="../../js/avatar-body.component.js"></script>
  <script src="../../js/feature-set-position.component.js"></script>

  <script src="../../js/Feature-Schemas.js"></script>
  <script src="../../js/camera-output.js"></script>
  <script src="../../js/hand-attach.js"></script>
  <script src="../../js/attach-point.js"></script>
  <script src="../../js/set-name.component.js"></script>
  <script src="../../js/randomize-spec-color.component.js"></script>
  <script src="../../js/Animation-Trigger.js"></script>


  <script>

    AFRAME.registerComponent('ground-collider', {
      schema: {
        vectorPosition: { type: 'vec3' },
        x: { default: 0 },
        y: { default: 5 },
        z: { default: 0 },
      },

      init: function () {
        let el = this.el;
        let data = this.data
        this.el.addEventListener('collide', function (e) {


          let classes = e.detail.body.el.className.split(' ')

          if (classes.includes("vxr-ground")) {

            el.removeAttribute("dynamic-body")
            el.setAttribute("position", { x: data.x, y: data.y, z: data.z })
            el.setAttribute("toggle-physics", "")

          } else {
            //console.log('Error on: ', e.detail.body.el);
          }

        });
      },

      update: function () {

      }
    })

  </script>

  <script>
    AFRAME.registerComponent('foo2', {
      init: function () {
        var el = this.el;
        this.el.addEventListener('collide', function (e) {
          let cathter02 = document.getElementById('catheter002');
          let intracathcap02 = document.getElementById('intracathcap002');
          let intracathcap03 = document.getElementById('intracathcap003');
          let animDisposable = document.getElementById('disposableAnim');
          let staticDisposable = document.getElementById('xvr-disposable');
          if (cathter02 == e.detail.body.el) {
            intracathcap02.setAttribute('visible', 'false');
            intracathcap02.remove();
            intracathcap03.setAttribute('visible', 'true');
            intracathcap03.setAttribute('dynamic-body', 'mass: 0.1');
            cathter02.setAttribute('visible', 'false');
            cathter02.remove();
            staticDisposable.setAttribute('visible', 'false');
            staticDisposable.remove();
            animDisposable.setAttribute('visible', 'true');
            animDisposable.setAttribute('animation-trigger', 'boolVar:true');
          }
        });
      }
    })
  </script>

  <script>
    AFRAME.registerComponent('foo3', {
      init: function () {
        var el = this.el;
        this.el.addEventListener('collide', function (e) {
          let intracathcap03 = document.getElementById('intracathcap003');
          if (intracathcap03 == e.detail.body.el) {
            //Activate animation with attach 
            intracathcap03.setAttribute('visible', 'false');
            intracathcap03.remove();
          }
        });
      }
    })
  </script>
  <script>
    AFRAME.registerComponent('foo4', {
      init: function () {
        var el = this.el;
        this.el.addEventListener('collide', function (e) {
          let bag = document.getElementById('vxr-bag');
          let serumCard = document.getElementById('serumcontrolcard01');
          if (bag == e.detail.body.el) {
            serumCard.setAttribute('constraint', 'target: #vxr-bag');

          }
        });
      }
    })
  </script>

  <script>

  </script>

  <script>
    AFRAME.registerComponent('follow', {
      schema: {
        target: { type: 'selector' },
        speed: { type: 'number' }
      },

      init: function () {
        this.directionVec3 = new THREE.Vector3();
      },

      tick: function (time, timeDelta) {
        var directionVec3 = this.directionVec3;

        // Grab position vectors (THREE.Vector3) from the entities' three.js objects.
        var targetPosition = this.data.target.object3D.position;
        var currentPosition = this.el.object3D.position;

        // Subtract the vectors to get the direction the entity should head in.
        directionVec3.copy(targetPosition).sub(currentPosition);

        // Calculate the distance.
        var distance = directionVec3.length();

        // Don't go any closer if a close proximity has been reached.
        if (distance < 0.4) { return; }

        // Scale the direction vector's magnitude down to match the speed.
        var factor = this.data.speed / distance;
        ['x', 'y', 'z'].forEach(function (axis) {
          directionVec3[axis] *= factor * (timeDelta / 1000);
        });

        // Translate the entity in the direction towards the target.
        this.el.setAttribute('position', {
          x: currentPosition.x + directionVec3.x,
          y: currentPosition.y + directionVec3.y,
          z: currentPosition.z + directionVec3.z
        });

      }
    });
  </script>

  <script>
    function randomizeColor(target) {
      target.setAttribute('color', '#' + Math.random().toString(16).substr(-6));
      // color randomizer credit: http://stackoverflow.com/a/7638362
    }
    function paintBall(evt) {
      let sphere = document.getElementById('sphere2');
      sphere.setAttribute('opacity', '1');
    }
    function unPaintBall(evt) {
      let sphere = document.getElementById('sphere2');
      sphere.setAttribute('opacity', '0');
    }
    function mass(evt) {
      let cathter02 = document.getElementById('catheter02');
      cathter02.setAttribute('dynamic-body', 'mass: 0.1');
    }
    function massTape01(evt) {
      let cathter02 = document.getElementById('tape01');
      cathter02.setAttribute('dynamic-body', 'mass: 0.1');
    }
    function positionCubeBone01(evt) {
      let cubebone001 = document.getElementById('cubebone01');
      let cubebonek = document.getElementById('cubebonek');
      // cathter02.position;
      console.log("Grab events with modify bone properties", cubebone001.getAttribute('position'));
      let mesh = cubebonek.getObject3D("mesh")
      var newVector = new THREE.Vector3(0, 4, 0)
      // let bone01 = mesh.children[0].children[0].children[0].children[0];
      mesh.children[0].children[0].children[0].children[0].rotation.y = 140;
      // bone01.position.copy(newVector);
      console.log("asdasdasdasdasdasdasd", mesh);

      // this.el.addEventListener('model-loaded', () => {


      //   })
    }

    function positionCubeBone02(evt) {
      let cubebone001 = document.getElementById('cubebone01');
      let cubebonek = document.getElementById('cubebonek');
      // cathter02.position;
      console.log("Grab events with modify bone properties", cubebone001.getAttribute('position'));
      let mesh = cubebonek.getObject3D("mesh")
      var newVector = new THREE.Vector3(0, 1, 0)
      // let bone01 = 
      mesh.children[0].children[0].children[0].children[0].rotation.y = 0;
      // bone01.position.copy(newVector);
      console.log("asdasdasdasdasdasdasd", mesh);

      // this.el.addEventListener('model-loaded', () => {


      //   })
    }

  </script>

  <script>
    AFRAME.registerComponent('input', {
      schema: {
        triggerKeyCode: { default: 32 } // spacebar
      },
      init: function () {
        var that = this;
        let sphere = document.getElementById("sphere2");
        document.body.onkeyup = function (e) {
          if (e.keyCode == that.data.triggerKeyCode) {
            console.log("input ------------");
            sphere.setAttribute('opacity', '1');
          }
        }
      }
    })

    AFRAME.registerComponent('ao-map', {
      schema: {
        src: { default: '' }
      },
      init: function () {
        console.log('AO MAP!');
        var aoMap = new THREE.TextureLoader().load(this.data.src);
        aoMap.flipY = false;
        this.el.addEventListener('model-loaded', function (e) {
          e.detail.model.traverse((o) => {
            if (o.isMesh) {
              o.material.aoMap = aoMap;
              if (o.geometry.attributes.uv2 === undefined &&
                o.geometry.attributes.uv !== undefined) {
                o.geometry.addAttribute('uv2', new THREE.BufferAttribute(o.geometry.attributes.uv.array, 2));
              }
            }
          });
        });

      }
    })

    function openPackage(element) {
      let obj = document.getElementById("e-intracathPackage")
      obj.setAttribute("animation-mixer", "loop:once;repetitions:once;clampWhenFinished:true")

      var delayInMilliseconds = 1000;

      setTimeout(function () {

        document.getElementById("sphere_e-catheteranim").setAttribute("visible", "false")

      }, delayInMilliseconds);
    }

  </script>
  <script>
    function spawnentity() {

      let syncs = document.getElementsByClassName("syncup");
      for (let i = 0; i < syncs.length; ++i) {
        syncs[i].setAttribute("networked", "template:#vxr-obj-template-catheter02;attachTemplateToLocal:true")
      }
    }
  </script>
  
  <script>
    //------------------------------------------------------------------------------------------------------
    //-------------------------------------------Basic functions--------------------------------------------
    //------------------------------------------------------------------------------------------------------

    function takeOffGloves(e) {

      if (window.event.relatedTarget.id == "lhand") {
        let hand = document.getElementById("leftHand").getObject3D("mesh").getObjectByName("handL2320").material.color = new THREE.Color(0xffffff);
        console.log("hand: ", hand)
      } else if (window.event.relatedTarget.id == "rhand") {
        let hand = document.getElementById("rightHand").getObject3D("mesh").getObjectByName("handR2320").material.color = new THREE.Color(0xffffff);
        console.log("right hand: ", hand)
      }
    }
    
    function playAnimation(e) {


console.log("event", window.event)
if (window.event.relatedTarget.id == "lhand") {
  let hand = document.getElementById("leftHand").getObject3D("mesh").getObjectByName("handL2320").material.color = new THREE.Color(0xe38666);
  console.log("hand: ", hand)
} else if (window.event.relatedTarget.id == "rhand") {
  let hand = document.getElementById("rightHand").getObject3D("mesh").getObjectByName("handR2320").material.color = new THREE.Color(0xe38666);
  console.log("right hand: ", hand)

}



}

    function emissiveObjectOff(element) {

      let emissiveObject = document.getElementById((element.id + "_emisive"))
      document.getElementById("arrow01").setAttribute("visible", "false")


      if (document.getElementById((element.id + "_emisive"))) {
        emissiveObject.setAttribute("visible", "false")
      }

      if (element.id == "e-Basin") {
        let arrow01 = document.getElementById('arrow01')
        arrow01.setAttribute('visible', 'false')
      }
    }

    function emissiveObjectOn(element) {
      let emissiveObject = document.getElementById((element.id + "_emisive"))
      console.log("emisive id: ", (element.id + "_emisive"))
      emissiveObject.setAttribute("visible", "true")

      let arrowTargetPosition = new THREE.Vector3()
      arrowTargetPosition.copy(emissiveObject.getObject3D("mesh").getWorldPosition())
      arrowTargetPosition.y = arrowTargetPosition.y + 0.3
      document.getElementById("arrow01").setAttribute("position", arrowTargetPosition)
      document.getElementById("arrow01").setAttribute("visible", "true")
    }
    
    function genericSetMass(element) {
      document.getElementById(element.id).setAttribute('dynamic-body', 'mass:0.1')
    }
    
    function triggerDisposableAnimation() {
      console.log("entity",document.getElementById("e-disposable_static"))
      document.getElementById("e-disposable_static").setAttribute("animation-mixer","loop:once;repetitions:0;clampWhenFinished:true")
    }
    
    AFRAME.registerComponent('trigger-animation', {
      schema: {
        entity_id: { type: 'string', default: '0' },
        obj_entity: { type: 'int', default: 0 },
      },

      init: function () {
        var el = this.el;
        console.log("data: ", this.data.entity_id)
        let id_Data = this.data.entity_id
        let iterator_entity = this.data.obj_entity

        this.el.addEventListener('collide', function (e) {

          //trigger animation
          if (id_Data == e.detail.body.el.id && iterator_entity == 1) {
            let obj = document.getElementById(e.detail.body.el.id + "_static")
            let emisive = document.getElementById(e.detail.body.el.id + "_emisive")
            obj.setAttribute("visible", "true")
            obj.setAttribute("animation-mixer", "loop:once;repetitions:once;clampWhenFinished:true")
            emisive.setAttribute("visible", "false")
            e.detail.body.el.setAttribute('visible', 'false');
            emisive.remove()
          }
          //trigger Opacity
          if (id_Data == e.detail.body.el.id && iterator_entity == 2) {
            let obj = document.getElementById(e.detail.body.el.id + "_static")
            let emisive = document.getElementById(e.detail.body.el.id + "_emisive")
            emisive.setAttribute("visible", "false")
            e.detail.body.el.setAttribute('visible', 'false');
            obj.setAttribute("visible", "true")
            emisive.remove()
            if(id_Data=="e-disposable"){
              document.getElementById("sphere_e-Clothed_Instruments_Vesical").setAttribute("visible","true")
            }


          }
          
          if (id_Data == e.detail.body.el.id && iterator_entity == 3) {
          console.log("-----------------")
          console.log("e.detail.body.el",e.detail.body.el.id)
          console.log("id_Data",id_Data)
            let obj1 = document.getElementById("e-catheter001")
            let obj2 = document.getElementById("e-catheter002")
            let obj3 = document.getElementById("e-medicalclothe01_static")
            let obj4 = document.getElementById("e-rubber_static")
            
            
            e.detail.body.el.setAttribute('visible', 'false');
            obj1.setAttribute("visible", "true")
            obj2.setAttribute("visible", "true")
            obj2.setAttribute("dynamic-body", "mass:0.0")
            obj3.setAttribute("dynamic-body", "mass:0.0")
            obj4.setAttribute("dynamic-body", "mass:0.0")
          }

        });
      }
    })

  </script>
</head>

<body>
  <a-scene physics="debug: true; gravity: -4; iterations: 75" networked-scene="
      room: process2;
      adapter: easyrtc;
      audio: true;
      debug: true;
      onConnect: spawnentity;
    ">
    <a-assets>
      <!-- <a-asset-item id="htc" src="../assets/vr_controller_vive.obj"></a-asset-item> -->

      <a-asset-item id="table" src="../../Models/gltf/Table.gltf"></a-asset-item>
      <a-asset-item id="alcoholbottle" src="../../Models/gltf/AlcoholBottle2.gltf"></a-asset-item>
      <a-asset-item id="bed" position="1.75217 0.92 1.00408" src="../../Models/gltf/Bed.gltf"></a-asset-item>
      <!-- <a-asset-item id="patient" src="../../Models/gltf/Patient.gltf"></a-asset-item> -->
      <a-asset-item id="patient" src="assets/Patient_Process2.gltf"></a-asset-item>
      <a-asset-item id="Tray_SterileCloth_Static" src="../Process7/Assets/Tray_SterileCloth_Static.gltf"></a-asset-item>
      <a-asset-item id="Bowl_Medic" src="../../Models/gltf/Bowl_Medic.gltf"></a-asset-item>
      <a-asset-item id="GlovesBox" src="../Process7/Assets/Gloves_Box.gltf"></a-asset-item>
      <a-asset-item id="Patient_Dates" src="../../Models/gltf/Patient_Dates02.gltf"></a-asset-item>
      <a-asset-item id="bracelet" src="../../Models/gltf/bracelet02.gltf"></a-asset-item>
      <a-asset-item id="intracathAnim" src="../../Models/gltf/intracathPackageAnimation.gltf"></a-asset-item>
      <a-asset-item id="StudentAvatar" src="assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="SpectatorAvatar" src="assets/avatars/SpectatorAvatar.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatar" src="assets/TeacherAvatar.gltf"></a-asset-item>
      <a-asset-item id="right-hand" src="../../super/process/assets/rightHandHigh.glb"></a-asset-item>
      <a-asset-item id="left-hand" src="../../super/process/assets/leftHandHigh.glb"></a-asset-item>
      <a-asset-item id="dripbag" src="../../Models/gltf/DripBag.gltf"></a-asset-item>
      <a-asset-item id="rubber" src="../../Models/gltf/Rubber.gltf"></a-asset-item>
      <a-asset-item id="medicaltape" src="../../Models/gltf/MedicalTape.gltf"></a-asset-item>
      <a-asset-item id="gauze" src="../../Models/gltf/Gauze.gltf"></a-asset-item>
      <a-asset-item id="allistweezers" src="../../Models/gltf/Scisors.gltf"></a-asset-item>
      <a-asset-item id="cottonswab" src="../../Models/gltf/CottonSwabs01.gltf"></a-asset-item>
      <a-asset-item id="salinebottle" src="../../Models/gltf/ClorhexidinaBottle.gltf"></a-asset-item>
      <a-asset-item id="alcoholgel" src="../../Models/gltf/AlcoholGel.gltf"></a-asset-item>
      <a-asset-item id="heparinseal" src="../../Models/gltf/HeparinSeal.gltf"></a-asset-item>
      <a-asset-item id="intracath" src="../../Models/gltf/Intracath.gltf"></a-asset-item>
      <a-asset-item id="card_yellow" src="../../Models/gltf/Card_Yellow2.gltf"></a-asset-item>
      <a-asset-item id="blanket_animation" src="assets/blanket_animation.gltf"></a-asset-item>

      <a-asset-item id="Armario" src="../HospitalRoomAssets/armario.gltf"></a-asset-item>
      <a-asset-item id="Mesacama" src="../HospitalRoomAssets/mesa_cama.gltf"></a-asset-item>
      <a-asset-item id="Sillon" src="../HospitalRoomAssets/sillon.gltf"></a-asset-item>
      <a-asset-item id="Sofa" src="../HospitalRoomAssets/sofa.gltf"></a-asset-item>
      <a-asset-item id="Table_004" src="../HospitalRoomAssets/Table_004.gltf"></a-asset-item>

      <!-- Avatars -->
      <a-asset-item id="StudentAvatarHead" src="assets/avatars/StudentAvatarHead.gltf"></a-asset-item>
      <a-asset-item id="StudentAvatarBody" src="assets/avatars/StudentAvatarBody.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatarHead" src="assets/avatars/TeacherAvatarHead.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatarBody" src="assets/avatars/TeacherAvatarBody.gltf"></a-asset-item>
      <a-asset-item id="student" src="assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="teacher" src="assets/TeacherAvatar.gltf"></a-asset-item>

      <!-- Theater -->
      <a-asset-item id="scenebase" src="/Models/gltf/Scene_Base.gltf"></a-asset-item>
      <a-asset-item id="scenemedixlablogo" src="/Models/gltf/Scene_Medixlablogo.gltf"></a-asset-item>
      <a-asset-item id="sceneieproeslogo" src="/Models/gltf/Scene_Ieproesblogo.gltf"></a-asset-item>
      <a-asset-item id="scenevertexlogo" src="/Models/gltf/Scene_VertexLogo.gltf"></a-asset-item>
      <a-asset-item id="scenebase02" src="/Models/gltf/Base_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="stairsprincipal" src="/Models/gltf/Stairs_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="ministairs" src="/Models/gltf/Mini_Stairs_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="roofauditorium" src="/Models/gltf/Roof_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="columns" src="/Models/gltf/Columns_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="frontwall" src="/Models/gltf/FrontWall_Auditorium.gltf"></a-asset-item>
      <a-video id="canalizacion" src="/videos/Test.mp4" autoplay loop="true"></a-video>
      <a-video id="logopng" src="/Models/Images/Ieproes_Logo.png"></a-video>

      <!-- Catheter -->
      <a-asset-item id="catheter01" src="../../Models/gltf/Catheter01.gltf"></a-asset-item>
      <a-asset-item id="catheter02" src="../../Models/gltf/Catheter02.gltf"></a-asset-item>
      <a-asset-item id="disposable" src="../../Models/gltf/Disposable.gltf"></a-asset-item>
      <a-asset-item id="disposable01" src="../../Models/gltf/Disposable01.gltf"></a-asset-item>
      <a-asset-item id="disposableanim" src="../../Models/gltf/DisposableAnim.gltf"></a-asset-item>
      <a-asset-item id="disposable_emisive" src="../../Models/gltf/Disposable_Static_02_emisive.gltf"></a-asset-item>
      <a-asset-item id="tape001" src="../../Models/gltf/Tape01.gltf"></a-asset-item>
      <a-asset-item id="tape002" src="../../Models/gltf/Tape02.gltf"></a-asset-item>
      <a-asset-item id="tape003" src="../../Models/gltf/Tape03.gltf"></a-asset-item>
      <a-asset-item id="tapestatic001" src="../../Models/gltf/TapeStatic01.gltf"></a-asset-item>
      <a-asset-item id="tapestatic002" src="../../Models/gltf/TapeStatic02.gltf"></a-asset-item>
      <a-asset-item id="tapestatic003" src="../../Models/gltf/TapeStatic03.gltf"></a-asset-item>
      <a-asset-item id="medicalclothe" src="../../Models/gltf/MedicalClothe.gltf"></a-asset-item>
      <a-asset-item id="trashcontainer" src="../../Models/gltf/TrashContainer.gltf"></a-asset-item>
      <a-asset-item id="trashcontainerblack" src="../../Models/gltf/TrashContainerBlack.gltf"></a-asset-item>
      <a-asset-item id="scissorbuttoned" src="../../Models/gltf/Scissor_Buttoned.gltf"></a-asset-item>
      <a-asset-item id="controlcard" src="../../Models/gltf/ControlCard.gltf"></a-asset-item>
      <a-asset-item id="serumcontrolcard" src="../../Models/gltf/SerumControlCard.gltf"></a-asset-item>
      <a-asset-item id="boxsharpobject" src="../../Models/gltf/Box_SharpObject.gltf"></a-asset-item>
      <a-asset-item id="intracathcap01" src="../../Models/gltf/Intracath_Cap_01.gltf"></a-asset-item>
      <a-asset-item id="intracathcap02" src="../../Models/gltf/Intracath_Cap_02.gltf"></a-asset-item>
      <a-asset-item id="intracathcap03" src="../../Models/gltf/Intracath_Cap_03.gltf"></a-asset-item>
      <a-asset-item id="tapeadultdate" src="../../Models/gltf/Tape_Adult_Date.gltf"></a-asset-item>
      <a-asset-item id="cottonpink" src="../../Models/gltf/Cotton_Pink.gltf"></a-asset-item>
      <a-asset-item id="disposablestatic02" src="../../Models/gltf/Disposable_Static_02.gltf"></a-asset-item>
      <a-asset-item id="cubebone" src="../../Models/gltf/CubeBone.gltf"></a-asset-item>
      <a-asset-item id="cubeik" src="../../Models/gltf/cubeik.gltf"></a-asset-item>
      <a-asset-item id="hospitalroom" src="../../Models/gltf/HospitalRoom.gltf"></a-asset-item>
      <a-asset-item id="hospitalbed" src="../../Models/gltf/BedHospital.gltf"></a-asset-item>
      <img id="sky-01" src="../../Models/Images/sky-01.jpg">
      
      <a-asset-item id="arrow" src="Assets/arrow.gltf"></a-asset-item>
      <a-asset-item id="tapeEmisive" src="Assets/Tape_Adult_Date_emisive.gltf"></a-asset-item>
      <a-asset-item id="MedicalClothe_emisive" src="Assets/MedicalClothe_emisive.gltf"></a-asset-item>
      <a-asset-item id="Rubber_emisive" src="Assets/Rubber_emisive.gltf"></a-asset-item>


      
      <canvas id="cam2"></canvas>


      <a-mixin id="pointer" raycaster="showLine: true; objects: .cube, a-link" super-hands="colliderEvent: raycaster-intersection;
                              colliderEventProperty: els;
                              colliderEndEvent:raycaster-intersection-cleared;
                              colliderEndEventProperty: clearedEls;">
      </a-mixin>
      <a-mixin id="touch" physics-collider phase-shift collision-filter="collisionForces: false"
        static-body="shape: sphere; sphereRadius: 0.022" super-hands="colliderEvent: collisions;
                          colliderEventProperty: els;
                          colliderEndEvent: collisions;
                          colliderEndEventProperty: clearedEls;">
      </a-mixin>
      <a-mixin id="point" raycaster="showLine: true; objects: .vxr-interact" collision-filter="collisionForces: false"
        static-body="shape: sphere; sphereRadius: 0.001" super-hands="colliderEvent: raycaster-intersection;
                    colliderEventProperty: els;
                    colliderEndEvent:raycaster-intersection-cleared;
                    colliderEndEventProperty: clearedEls;">
      </a-mixin>
      <a-mixin id="cube" geometry="primitive: box; width: 0.33; height: 0.33; depth: 0.33" hoverable grabbable
        stretchable draggable event-set__dragdrop="_event: drag-drop; geometry.primitive: sphere; geometry.radius: 0.25"
        event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
        event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
        event-set__dragon="_event: dragover-start; material.wireframe: true"
        event-set__dragoff="_event: dragover-end; material.wireframe: false" dynamic-body shadow>
      </a-mixin>

      <!-- Player -->
      <template id="player-template">
        <a-entity networked-audio-source="positional:false"></a-entity>
      </template>
      â€‹
      <!-- Nurse Avatar -->
      <template id="student-avatar-template">
        <a-entity class="NurseHeadAvatar" gltf-model="#StudentAvatar" position="0 2 0"
          networked-audio-source="positional:false"></a-entity>

      </template>

      <!-- Teacher Avatar -->
      <template id="teacher-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#TeacherAvatar" scale="0.8 0.8 0.8"
          networked-audio-source="positional:false">
        </a-entity>
      </template>

      <!-- Spectator Avatar -->
      <template id="spectator-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#SpectatorAvatar" networked-audio-source="positional:false">
        </a-entity>
      </template>

      <!-- Teacher Avatar Constraints -->
      <template id="constraint-teacher-avatar-template">
        <a-entity>
          <a-entity class="name-up-teacher"></a-entity>
          <!-- <a-entity class="TeacherAvatar" id="teacher" gltf-model="#teacher"></a-entity> -->
          <a-entity class="TeacherAvatarBody" id="teacherbody" gltf-model="#TeacherAvatarBody"
            dynamic-body="angularDamping: 1"></a-entity>
          <a-entity class="TeacherAvatarHead" id="teacherhead" gltf-model="#TeacherAvatarHead" static-body
            avatar-body="body:#teacherbody; id:#teacherbody"></a-entity>
        </a-entity>
      </template>

      <!-- Student Avatar Constraints -->
      <template id="constraint-student-avatar-template">
        <a-entity>
          <a-entity class="name-up-student"></a-entity>
          <a-entity class="StudentAvatar" id="student" gltf-model="#student"></a-entity>
        </a-entity>
      </template>

      <!-- Spectator Avatar Constraints -->
      <template id="constraint-spectator-avatar-template">
        <a-entity>
          <a-entity class="name-up"></a-entity>
          <a-entity class="SpectatorAvatar" id="spectator" gltf-model="#SpectatorAvatar"></a-entity>
      </template>

      <!-- Right Hand -->
      <template id="right-hand-template">
        <a-entity>
          <a-entity id="rightHand" scale="0.8 0.8 0.8" gltf-model="#right-hand"></a-entity>
        </a-entity>
      </template>

      <!-- Left Hand -->
      <template id="left-hand-template">
        <a-entity>
          <a-entity id="leftHand" scale="0.8 0.8 0.8" gltf-model="#left-hand"></a-entity>
        </a-entity>
      </template>

      <!-- vxr-template -->
      <template id="vxr-template">
        <a-entity>
          <a-box class="vxr-obj-a" rotator="speed:-2" width="0.35" height="0.35" depth="0.35" rotation="0 0 0"
            color="green" position="0 0 0"></a-box>
          <a-sphere class="vxr-obj-b" toggle-physics color="#f00" dynamic-body draggable grabbable radius="0.18"
            position="0.5 0 0"></a-sphere>
          <a-box class="vxr-obj-c" rotator="speed:2" color="blue" width="0.35" height="0.35" depth="0.35"
            position="1 0 0"></a-box>
        </a-entity>
      </template>

      <!-- vxr-gltf -->


      <template id="vxr-obj-alcoholbottle">
        <a-entity>
          <a-entity id="e-alcoholbottle" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-alcoholbottle vxr-interact" gltf-model="#alcoholbottle" draggable grabbable toggle-physics
            position="-0.14496 0.30976 0.04129"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-rubber">
        <a-entity>
          <a-entity id="e-rubber" rotation="0 0 0" class="vxr-obj-rubber vxr-interact" gltf-model="#rubber"
          ondragstart="emissiveObjectOn(this)"
          ondragend="emissiveObjectOff(this)"
            toggle-physics draggable ground-collider grabbable position="-0.46001 0.34687 -0.170" scale="0.8 0.8 0.8"
            ondragstart="this.setAttribute('set-object-position','')"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-rubber-emisive">
        <a-entity>
          <a-entity id="e-rubber_emisive"   class="vxr-obj-rubber vxr-interact" gltf-model="#Rubber_emisive"
            draggable ground-collider grabbable position="0.993 0.221 -1.137" rotation="90 0 0" scale="0.8 0.8 0.8"
            visible="false"
            ></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-rubber-static">
        <a-entity>
          <a-entity id="e-rubber_static"  class="vxr-obj-rubber vxr-interact" gltf-model="#rubber" ondragstart="genericSetMass(this)"
            draggable ground-collider grabbable position="0.993 0.221 -1.137" rotation="90 0 0" scale="0.8 0.8 0.8"
            visible="false"
            ></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-dripbag">
        <a-entity>
          <a-entity id="e-bag" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
          ondragstart="emissiveObjectOn(this)"
          ondragend="emissiveObjectOff(this)"
            class="vxr-obj-dripbag vxr-interact" gltf-model="#dripbag" draggable grabbable toggle-physics
            position="-0.57306 0.56921 -0.15106" rotation="3.799818987286494 0.4393034325279546 -0.07832135599854885"
            ondragstart="this.setAttribute('set-object-position','')"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-dripbag-emisive">
        <a-entity>
          <a-entity id="e-bag_emisive" grabbable="maxGrabbers: NaN" class="vxr-obj-dripbag vxr-interact" 
            gltf-model="#dripbag" draggable grabbable position="0.434 1.050 -1.801" rotation="0 0 0"
            visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-dripbag-static">
        <a-entity>
          <a-entity id="e-bag_static" grabbable="maxGrabbers: NaN" class="vxr-obj-dripbag vxr-interact" foo
            gltf-model="#dripbag" draggable grabbable position="0.434 1.050 -1.801" rotation="0 0 0"
            visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-medicaltape">
        <a-entity>
          <a-entity id="e-medicaltape" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-medicaltape vxr-interact" gltf-model="#medicaltape" draggable grabbable toggle-physics
            position="-0.35446 0.30813 -0.27066"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-allistweezers">
        <a-entity>
          <a-entity id="e-allistweezers" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-allistweezers vxr-interact" gltf-model="#scissorbuttoned" draggable grabbable toggle-physics
            position="-0.54258 0.31284 -0.32774"
            rotation="-0.00002995084612075825 5.170835992280365e-7 0.000016121786231042128"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab01">
        <a-entity>
          <a-entity id="e-corronswab01" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-cottonswab01 vxr-interact" gltf-model="#cottonpink" draggable grabbable toggle-physics
            position="-0.00649 0.31925 0.03301"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab02">
        <a-entity>
          <a-entity id="e-corronswab02" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-cottonswab02 vxr-interact" gltf-model="#cottonswab" draggable grabbable toggle-physics
            position="-0.02017 0.31925 -0.00188"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab03">
        <a-entity>
          <a-entity id="e-corronswab03" dynamic-body="sphereRadius: NaN" class="vxr-obj-cottonswab03 vxr-interact"
            gltf-model="#cottonswab" draggable grabbable toggle-physics position="-0.04211 0.31925 0.03964"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-clorhexidine">
        <a-entity>
          <a-entity id="e-clorhexidine" class="vxr-obj-salinebottle vxr-interact" gltf-model="#salinebottle" draggable
            grabbable toggle-physics position="-0.25467 0.30649 0.04341"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-alcoholgel">
        <a-entity>
          <a-entity id="e-alcoholgel" class="vxr-obj-alcoholgel vxr-interact" gltf-model="#alcoholgel" draggable
            grabbable toggle-physics position="-0.3748 0.30734 0.02808"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-heparinseal">
        <a-entity>
          <a-entity id="e-heparinseal" class="vxr-obj-heparinseal vxr-interact" gltf-model="#heparinseal" draggable
            grabbable toggle-physics position="-1.57 0.50 10"></a-entity>
        </a-entity>
      </template>



      <template id="vxr-obj-template-catheter01">
        <a-entity>
          <a-entity id="e-catheter001" class="vxr-obj-catheter01" gltf-model="#catheter01"
            rotation="-42.646394607177434 0 0" position="0.994 0.283 -1.015" scale="1 1 1" visible="false">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-catheter02">
        <a-entity>
          <a-entity id="e-catheter002" class="vxr-obj-catheter02" gltf-model="#catheter02"
            rotation="-42.38397993700752 0 0" position="0.994 0.293 -1.004" scale="1 1 1" visible="false" draggable
            grabbable ondragstart="genericSetMass(this)"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-catheter02-emisive">
        <a-entity>
          <a-entity id="e-catheter002-emisive" class="vxr-obj-catheter02" gltf-model="#catheter02"
            rotation="-42.38397993700752 0 0" position="0.994 0.293 -1.004" scale="1 1 1" visible="false" draggable
            grabbable ></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-catheter02-static">
        <a-entity>
          <a-entity id="e-catheter002-static" class="vxr-obj-catheter02" gltf-model="#catheter02"
            rotation="-42.38397993700752 0 0" position="0.994 0.293 -1.004" scale="1 1 1" visible="false" draggable
            grabbable ></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-disposable">
        <a-entity>
          <a-entity id="e-disposable" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            ondragstart="emissiveObjectOn(this)"
            ondragend="emissiveObjectOff(this)"
            class="vxr-obj-disposable" gltf-model="#disposable" position="0.10656 0.35818 -0.31558" scale="1 1 1"
            visible="true" draggable grabbable toggle-physics>
          </a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-disposable-emisive">
        <a-entity>
          <a-entity id="e-disposable_emisive"
          class="vxr-obj-disposableanim" gltf-model="#disposable_emisive"
          position="0.431 0.798 -1.786" scale="1 1 1" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-disposable-static">
        <a-entity>
          <a-entity id="e-disposable_static" class="vxr-obj-disposableanim" gltf-model="#disposableanim"
            position="0.432 0.508 -1.786" scale="1 1 1" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tape01">
        <a-entity>
          <a-entity id="e-tape01" grabbable="maxGrabbers: NaN" class="vxr-obj-tape01" gltf-model="#tapestatic001"
          ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            position="0.54179 0.30751 -0.347" rotation="0 0 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tape04">
        <a-entity>
          <a-entity id="e-tape04" grabbable="maxGrabbers: NaN" class="vxr-obj-tape01" gltf-model="#tapestatic001"
          ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            position="0.54179 0.30751 -0.212 " rotation="0 0 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tape05">
        <a-entity>
          <a-entity id="e-tape05" grabbable="maxGrabbers: NaN" class="vxr-obj-tape01" gltf-model="#tapestatic001"
          ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            position="0.54179 0.30751 -0.262" rotation="0 0 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tape02">
        <a-entity>
          <a-entity id="e-tape02" grabbable="maxGrabbers: NaN" class="vxr-obj-tape02" gltf-model="#tapestatic002"
          ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            position="0.54179 0.30751 -0.137" rotation="0 0 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tape03">
        <a-entity>
          <a-entity id="e-tape03" grabbable="maxGrabbers: NaN" class="vxr-obj-tape03" gltf-model="#tapestatic003"
          ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            position="0.54179 0.30502 -0.079" rotation="0 0 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-medicalclothe">
        <a-entity>
          <a-entity id="e-medicalclothe01" grabbable="maxGrabbers: NaN" class="vxr-obj-medicalclothe"
            gltf-model="#medicalclothe" position="0.36514 0.33025 -0.39681" rotation="0 90 0" scale="1 1 1"
            ondragstart="emissiveObjectOn(this)"
            ondragend="emissiveObjectOff(this)"
            visible="true" draggable grabbable dynamic-body=""></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-medicalclothe-emisive">
        <a-entity>
          <a-entity id="e-medicalclothe01_emisive" grabbable="maxGrabbers: NaN" class="vxr-obj-medicalclothe"
            gltf-model="#MedicalClothe_emisive" position="1.006 0.192 -1.063" rotation="0 90 0" scale="1 1 1"
            visible="false" draggable grabbable ></a-entity>
        </a-entity>
      </template>
      




      <template id="vxr-obj-template-medicalclothestatic">
        <a-entity>
          <a-entity id="e-medicalclothe01_static" class="vxr-obj-medicalclothestatic" gltf-model="#medicalclothe"
            position="1.006 0.192 -1.063" ondragstart="genericSetMass(this)" rotation="0 90 0" scale="1 1 1" visible="false" draggable grabbable>
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tapestatic01">
        <a-entity>
          <a-entity id="e-tape01_static" class="vxr-obj-tapestatic01" gltf-model="#tapestatic001"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tapestatic04">
        <a-entity>
          <a-entity id="e-tape04_static" class="vxr-obj-tapestatic01" gltf-model="#tapestatic001"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tapestatic05">
        <a-entity>
          <a-entity id="e-tape05_static" class="vxr-obj-tapestatic01" gltf-model="#tapestatic001"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tapestatic02">
        <a-entity>
          <a-entity id="e-tape02_static" class="vxr-obj-tapestatic02" gltf-model="#tapestatic002"
            position="0.994 0.240 -1.059" rotation="0 0 0"
            scale="0.5 0.5 0.5 " visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tapestatic03">
        <a-entity>
          <a-entity id="e-tape03_static" class="vxr-obj-tapestatic03" gltf-model="#tapestatic003"
            position="0.994 0.240 -1.065" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false">
          </a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tape-emisive-01">
        <a-entity>
          <a-entity id="e-tape01_emisive" class="vxr-obj-tapestatic01" gltf-model="#tapeEmisive"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tape-emisive-04">
        <a-entity>
          <a-entity id="e-tape04_emisive" class="vxr-obj-tapestatic01" gltf-model="#tapeEmisive"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tape-emisive-05">
        <a-entity>
          <a-entity id="e-tape05_emisive" class="vxr-obj-tapestatic01" gltf-model="#tapeEmisive"
            position="0.993 0.242 -1.062" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tape-emisive-02">
        <a-entity>
          <a-entity id="e-tape02_emisive" class="vxr-obj-tapestatic02" gltf-model="#tapeEmisive"
            position="0.994 0.240 -1.058" rotation="0 0 0"
            scale="0.5 0.5 0.5 " visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tape-emisive-03">
        <a-entity>
          <a-entity id="e-tape03_emisive" class="vxr-obj-tapestatic03" gltf-model="#tapeEmisive"
            position="0.994 0.240 -1.065" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-controlcard">
        <a-entity>
          <a-entity id="e-controlcard" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-serumcontrolcard" foo4 gltf-model="#serumcontrolcard" draggable grabbable toggle-physics
            position="-0.35705 0.30922 -0.40824" rotation="0 0 0" scale="1 1 1" visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-boxsharpobject">
        <a-entity>
          <a-entity id="e-boxsharp" class="vxr-obj-boxsharpobject" gltf-model="#boxsharpobject"
            position="0.309 -0.3109 -0.40572" rotation="0 180 0" scale="0.6 0.6 0.6" visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracath">
        <a-entity>
          <a-entity id="e-intracath" scale="1.5 1.5 1.4" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-intracath vxr-interact" gltf-model="#intracath" position="0.26639 0.31599 -0.2134"
            rotation="0.31123650403819875 90 178.4109694219362" draggable grabbable toggle-physics></a-entity>
        </a-entity>
      </template>

      

      <template id="vxr-obj-template-intracathcap01">
        <a-entity>
          <a-entity id="e-intracathcap001" class="vxr-obj-intracathcap01" gltf-model="#intracathcap01"
            position="0.13881 0.32329 -0.04464" rotation="0 0 0" scale="1 1 1" visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracathcap02">
        <a-entity>
          <a-entity id="e-intracathcap002"  class="vxr-obj-intracathcap02"
            gltf-model="#intracathcap02" position="0.10738 0.5008 -0.0476" rotation="0 180 0" scale="1 1 1"
            visible="true" dynamic-body draggable grabbable
            ondragstart="emissiveObjectOn(this)"
            ondragend="emissiveObjectOff(this)"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-intracathcap02-emisive">
        <a-entity>
          <a-entity id="e-intracathcap002_emisive" static-body="sphereRadius: NaN" class="vxr-obj-intracathcap02"
            gltf-model="#intracathcap02" position="0.896 0.271 -0.060" rotation="0 180 0" scale="1 1 1"
            visible="true" dynamic-body draggable grabbable></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-intracathcap02-static">
        <a-entity>
          <a-entity id="e-intracathcap002_static" static-body="sphereRadius: NaN" class="vxr-obj-intracathcap02"
            gltf-model="#intracathcap02" position="0.896 0.271 -0.060" rotation="0 180 0" scale="1 1 1"
            visible="true" dynamic-body draggable grabbable></a-entity>
        </a-entity>
      </template>
      
      

      <template id="vxr-obj-template-intracathcap03">
        <a-entity>
          <a-entity id="e-intracathcap03" class="vxr-obj-intracathcap03" gltf-model="#intracathcap03"
            position="0.897 0.273 -0.059" rotation="0 180 0" scale="1 1 1" visible="false" dynamic-body="mass: 0.0"
            draggable grabbable></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tapeadult">
        <a-entity>
          <a-entity id="e-tapeadult" grabbable="maxGrabbers: NaN" class="vxr-obj-tapeadult" gltf-model="#tapeadultdate"
            position="0.54584 0.30423 -0.003" rotation="0 180 0" scale="1 1 1" visible="true"
            dynamic-body="" draggable grabbable ondragstart="mass(event)"></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-tapeadult-emisive">
        <a-entity>
          <a-entity id="e-tapeadult_emisive" class="vxr-obj-tapeadultstatic" gltf-model="#tapeEmisive"
            position="0.992 0.244 -1.063" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-tapeadult-static">
        <a-entity>
          <a-entity id="e-tapeadult_static" class="vxr-obj-tapeadultstatic" gltf-model="#tapeadultdate"
            position="0.992 0.244 -1.063" rotation="0 0 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-disposablestatic02">
        <a-entity>
          <a-entity id="e-disposablestatic02" class="vxr-obj-disposablestatic02" gltf-model="#disposablestatic02"
            position="0.433 0.850 -1.748" rotation="0 0 0" scale="1 1 1" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-card_yellow">
        <a-entity>
          <a-entity id="e-card_yellow" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-allistweezers vxr-interact" gltf-model="#card_yellow" dynamic-body draggable grabbable
            toggle-physics position="-0.52658 0.30813 -0.40513">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Bowl-Medic01">
        <a-entity>
          <a-entity id="e-Bowl-Medic01" grabbable="maxGrabbers: NaN" class="vxr-obj-Bowl-Medic01 vxr-interact"
            gltf-model="#Bowl_Medic" draggable="" grabbable position="-0.0222 0.30543 0.0188"
            static-body="shape:mesh; sphereRadius: NaN" scale="1.3 1.1 1.3" rotation="0 0 0">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-glovesbox">
        <a-entity>
          <a-entity id="e-glovesbox" grabbable="maxGrabbers: NaN" class="vxr-obj-glovesbox vxr-interact"
            gltf-model="#GlovesBox" draggable grabbable position="-0.55095 0.29172 0.02588" scale="0.6 0.6 0.6">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracathPackage">
        <a-entity>
          <a-entity id="e-intracathPackage" scale="1.15773 1 1" rotation="0 0 0"
            class="vxr-obj-intracathPackage vxr-interact" gltf-model="#intracathAnim"
            position="0.26656 0.31883 -0.21141" visible="true">
          </a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-blanket_animation">
        <a-entity>
          <a-entity id="e-blanket_animation" scale="1.15773 1 1" rotation="0 0 0"
            class="vxr-obj-blanket_animation vxr-interact" gltf-model="#blanket_animation"
            position="0.26656 0.31883 -0.21141" visible="true">
          </a-entity>
        </a-entity>
      </template>

      <!-- <template id="audience">
        <a-entity id="spectator" position="-2.9119 2.18025 -2.79791" assign-seat>
          <a-entity id="constraint-spectator" camera look-controls>
            <a-entity class="name-up" name-up></a-entity>
          </a-entity>
        </a-entity>
      </template> -->

    </a-assets>


    <!-- Hidden Static Meshes  -->

    <a-sky rotation="0 180 0" position="0 -70 0" src="#sky-01"></a-sky>
    <a-light id="directionallight" light="intensity: 0.2" type="directional" position="0 0 0" rotation="-90 0 0"
      intensity="0.200" target="#directionaltarget">
      <a-entity id="directionaltarget" position="0 0 -1"></a-entity>
    </a-light>
    <a-entity light="intensity: 0.3; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"
      id="ambientlight"></a-entity>
    <a-entity light="color: #FFFFFF; penumbra: 0.81; type: point; intensity: 0.2" id="light01"
      position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>
    <!-- Static Objects -->

    <a-entity id="tstTable" class="gltf" gltf-model="#table" position="-0.12958 0.9067 -0.363" rotation="0 -90 0">
    </a-entity>
    <a-entity id="patient01" gltf-model="#patient" rotation="-6.669228735322783 0.8210485204224697 2.336521888543497"
      scale="" position="1.22482 1.91048 -0.31067" material="color: brown">
    </a-entity>

    <a-entity id="armario" gltf-model="#Armario" scale="" position="-0.12389 0.915 3" rotation="0 -90 0"
      ao-map="src: ../HospitalRoomAssets/AOMap_armario.png">
    </a-entity>
    <a-entity id="mesacama" gltf-model="#Mesacama" scale="" rotation="0 -90 0" position="-1.34977 0.97098 3.17117"
      ao-map="src: ../HospitalRoomAssets/AOMap_mesacama.png">
    </a-entity>
    <a-entity id="sillon" gltf-model="#Sillon" scale="" rotation="0 180 0" position="3.11107 0.90537 1.69624"
      ao-map="src: ../HospitalRoomAssets/AOMap_sillon.png">
    </a-entity>
    <a-entity id="sofa" gltf-model="#Sofa" scale="" rotation="0 180 0" position="2.00436 0.90695 3.079"
      ao-map="src: ../HospitalRoomAssets/AOMap_sofa.png">
    </a-entity>
    <a-entity id="table_004" gltf-model="#Table_004" scale="" rotation="0 -90 0" position="2.49729 0.91326 -1.83804">
    </a-entity>


    <a-entity id="bedpatient" gltf-model="#hospitalbed" position="1.28659 0.8957 -1.12821" rotation="0 -90 0">
    </a-entity>
    <a-box id="" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" visible="false"
      static-body="sphereRadius: NaN" opacity="0" static-body rotation="" position="0.04312 0.33152 -0.05529"
      color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxtapes" opacity="0" static-body rotation="0 0 0" position="0.53699 1.78762 -0.42932" color="red"
      depth="0.33" scale="1 1 1.600" height="0.02" width="0.11"></a-box>
    <a-box id="boxcontainertoxic" opacity="0" static-body rotation="0 0 0" position="0.29 1.16747 -0.53141" color="red"
      depth="0.33" height="0.02" width="0.31" foo3></a-box>

    <a-entity id="base" gltf-model="/Models/gltf/Base.gltf" scale="1 1.05 1" position="0.579 0.915 -2.002"
      material="color: brown" rotation=""></a-entity>

    <a-box id="boxTable1" scale="1.0 1 1.2" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="-0.119 1.75813 -0.37707" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
      
      <a-box id="boxBed" scale="0.80 1 3.5" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="1.291 1.650 -1.127" color="red" depth="0.6" height="0.1" width="1.1"></a-box>

    <!-- Theater Lights -->
    <a-entity background="color: #92f2ff"></a-entity>

    <a-entity light="intensity: 0.7; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"
      id="ambientlight"></a-entity>
    <a-entity light="color: #ffffff; penumbra: 0.81; type: point; intensity: 0.2" id="light01"
      position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>

    <a-entity id="player" networked="template:#player-template;attachTemplateToLocal:false;" position="-0.900 1 -2.470"
      rotation="0 180 0" >
      <a-entity id="camera" camera position="0 1 0.2" look-controls zoom="100" fov="120"
        networked="template:#constraint-teacher-avatar-template;attachTemplateToLocal:false;">
      </a-entity>
      <!-- /VIVE CONTROLLERS -->
      <a-entity id="lhand" vive-controls="hand: left;model:false"  mixin="touch" input-controls="hand: left" networked="template:#left-hand-template">
      </a-entity>
      <a-entity id="rhand" mixin="touch" vive-controls="hand: right;model:false"  input-controls="hand: right"
        networked="template:#right-hand-template">
      </a-entity>
    </a-entity>

    

    <a-sphere id="sphere_e-catheteranim" static-body="sphereRadius: NaN" scale="0.71168 0.71168 0.71168" static-body
      ondragend="openPackage(this)" opacity="1" position="0.34341 1.85504 -0.41727" attach-point-v2
      geometry="radius: 0.03"> </a-sphere>

    <a-entity id="xvr-trashcontainerblack" gltf-model="#trashcontainerblack" position="0.60795 0.91557 -0.57177"
      scale="0.49177 0.49177 0.49177" visible="true"></a-entity>
    <a-entity id="xvr-trashcontainerred" gltf-model="#trashcontainer" position="0.60795 0.91537 -0.24833"
      scale="0.49177 0.49177 0.49177" visible="true"></a-entity>


    <!-- <a-entity id="cubebone02" gltf-model="#cubebone" position="0 2 0" scale="0.1 0.1 0.1"></a-entity>
    <a-entity id="cubeik01" gltf-model="#cubeik" position="0 2 2" scale="1 1 1" bone></a-entity> -->

    <a-entity id="patientdates" gltf-model="#Patient_Dates" position="1.22 2.287 -2.38986" rotation="0 -90 0">
    </a-entity>

    <a-entity id="Bracelet" scale="0.97056 0.97056 1.02845" gltf-model="#bracelet" position="0.99135 1.71708 -1.23903"
      rotation="0 84.61 0"></a-entity>

    <a-entity id="tray" gltf-model="#Tray_SterileCloth_Static" visible="true" position="0.23706 1.8094 -0.21214"
      rotation="0 0 0"></a-entity>

    <a-entity id="hospitalroom01" gltf-model="#hospitalroom" position="0.14005 0.858 0.47531" scale="1 1 1"
      rotation="0 -90 0">
    </a-entity>

    <a-box id="boxFloor" scale="4.14767 1 7.15846" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="0.36093 0.85321 -0.37707" color="red" depth="0.6" height="0.1" width="1.1"></a-box>

    <a-entity id="arrow01" gltf-model="#arrow" visible="false" position="1.219 2.000 -0.835" rotation="0 0 0"
      animation-mixer>
    </a-entity>
    
    <a-sphere id="sphere-gloves-animation" visible="true" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN"
    static-body opacity="1" position="-0.588 1.885 -0.171" ondragstart="playAnimation()" attach-point-v2
    geometry="radius: 0.04"> </a-sphere>
    
    <a-sphere id="sphere-gloves-off" visible="true" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN"
    static-body opacity="1" position="0.544 1.580 -0.603" ondragstart="takeOffGloves()" attach-point-v2
    geometry="radius: 0.04"> </a-sphere>
    
    <a-sphere id="sphere_rubber" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-rubber;obj_entity:2" opacity="1" position="0.998 1.723 -1.331"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_medicalclothes" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-medicalclothe01;obj_entity:2" opacity="1" position="1 1.723 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    
    
    <a-sphere id="sphere_tape01" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tape01;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_tape02" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tape02;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_tape03" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tape03;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_tape04" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tape04;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_tape05" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tape05;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_tapeadult" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-tapeadult;obj_entity:2" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_e-intracath" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-intracath;obj_entity:3" opacity="1" position="0.994 1.734 -1.270"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_bag" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-bag;obj_entity:2" opacity="1" position="0.420 2.612 -1.994"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-sphere id="sphere_disposable" scale="0.3 0.3 0.3" static-body
    trigger-animation="entity_id:e-disposable;obj_entity:2" opacity="1" position="0.432 2.305 -1.986"
    attach-point-v2 geometry="radius: 0.02"> </a-sphere>
    
    <a-box id="sphere_e-Clothed_Instruments_Vesical" scale="0.4 0.4 0.4" static-body="sphereRadius: NaN"
      opacity="0.5"  dynamic-body="mass:0.0; sphereRadius: NaN" visible="false"
      rotation="" position="0.415 1.897 -1.862" color="red" depth="0.1"ondragstart="triggerDisposableAnimation()"
      height="0.1" width="0.1"></a-box>
    

  </a-scene>

  <script src="../../js/buttonsScene.js"></script>

  <script>
    // Define custom schema for syncing avatar color, set by random-color
    NAF.schemas.add({
      template: '#student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#spectator-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#constraint-spectator-avatar-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.name-up',
          component: 'name-up'
        },
        {
          selector: '.SpectatorAvatar',
          component: 'randomize-spec-color'
        }
      ]
    });
    NAF.schemas.add({
      template: '#constraint-teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#constraint-student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#player-template',
      components: [
        'position',
        'rotation',
      ]
    });
    NAF.schemas.add({
      template: '#right-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#left-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#vxr-obj-template-catheter02',
      components: [
        'position',
        'rotation',
        {
          selector: '.vxr-obj-catheter02',
          property: 'visible'
        }
      ]
    });

    //Called by Networked-Aframe when connected to server
    function onConnect() {

    }
  </script>
  <!-- <script src="../../js/Feature-SpawnTemplate.js"></script> -->

  <script src="../../js/Feature-SpawnObjects.js"></script>
  <!-- <script src="../../js/vxr-full-house.js"></script> -->



</body>

</html>