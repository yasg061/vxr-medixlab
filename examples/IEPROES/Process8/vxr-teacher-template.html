<html>

<head>
  <title>Vertex Medixlab</title>
  <!-- Replace "../build.js" with the super-hands and
         A-Frame distributions to run : -->
  <script src="../../super/build.js"></script>
  <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
  <!-- <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script> -->
  <!-- Networked aframe -->
  <script>
    let url = "../../../js/structureEntitiesProcess8.json"
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
  <script src="/easyrtc/easyrtc.js"></script>
  <script src="/dist/networked-aframe.js"></script>
  <!-- <script    src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script> -->
  <script src="/js/spawn-in-circle.component.js"></script>
  <script src="aframe-particle-system-component.min.js"></script>




  <!-- Super hands -->
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.js"></script>
  <!-- <script src="../../js/aframe-physics-system.js"></script> -->
  <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
  <script
    src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <!-- ownership transfer dependencies -->

  <script src="../../js/spawner.component.js"></script>
  <script src="../../js/toggle-physics.component.js"></script>
  <script src="../../js/rotator.component.js"></script>
  <script src="../../js/input.component.js"></script>
  <script src="../../js/avatar-body.component.js"></script>
  <script src="../../js/Feature-Schemas.js"></script>
  <script src="../../js/camera-output.js"></script>
  <script src="../../js/Feature-Bones.component.js"></script>
  <script src="../../js/Feature-BonesPosition.component.js"></script>
  <script src="../../js/Feature-EmisiveObject.js"></script>

  <!-- <script src="../../js/hand-attach.js"></script> -->
  <script src="../../js/attach-intracath.js"></script>
  <script src="../../js/attach-to-position.js"></script>
  <script src="../../js/set-name.component.js"></script>

  <script src="../../js/randomize-spec-color.component.js"></script>

  <script>
    let boolstate = true
    AFRAME.registerComponent('model-opacity', {
      init() {
        var data = this.data;
        this.el.addEventListener('model-loaded', e => {
          var mesh = this.el.getObject3D('mesh');
          console.log("mesh", mesh)

          mesh.traverse(function (node) {
            console.log("material option", node.material)
            if (node.isMesh && boolstate) {
              // mesh.material.color.setRGB(255 ,0 ,0)
              node.material.color = new THREE.Color("rgb(237, 38, 81)");
              node.material.needsUpdate = true;
              console.log("works -----")
              boolstate = false

            }
          });
        });
      },

    });

    AFRAME.registerComponent('trigger-animation', {
      schema: {
        entity_id: { type: 'string', default: '0' },
        obj_entity: { type: 'int', default: 0 },
      },

      init: function () {
        var el = this.el;
        console.log("data: ", this.data.entity_id)
        let id_Data = this.data.entity_id
        let iterator_entity = this.data.obj_entity

        this.el.addEventListener('collide', function (e) {

          //trigger animation
          if (id_Data == e.detail.body.el.id && iterator_entity == 1) {
            let obj = document.getElementById(e.detail.body.el.id + "_static")
            let emisive = document.getElementById(e.detail.body.el.id + "_emisive")
            obj.setAttribute("visible", "true")
            obj.setAttribute("animation-mixer", "loop:once;repetitions:once;clampWhenFinished:true")
            emisive.setAttribute("visible", "false")
            e.detail.body.el.setAttribute('visible', 'false');
            emisive.remove()
          }
          //trigger Opacity
          if (id_Data == e.detail.body.el.id && iterator_entity == 2) {
            let obj = document.getElementById(e.detail.body.el.id + "_static")
            let emisive = document.getElementById(e.detail.body.el.id + "_emisive")
            emisive.setAttribute("visible", "false")
            e.detail.body.el.setAttribute('visible', 'false');
            obj.setAttribute("visible", "true")
            emisive.remove()
          }


          if (id_Data == e.detail.body.el.id && iterator_entity == 3) {

            let obj = document.getElementById(`e-emptyglass`) 
               
              document.getElementById("e-waterglass").setAttribute("visible", "true") 

            obj.remove();        
            
          }

          if (id_Data == e.detail.body.el.id && iterator_entity == 4) {

            let obj=document.getElementById(id_Data)

              document.getElementById("e-Gloves_Steril").setAttribute("visible", "true")
              document.getElementById("sphere-gloves-animation").setAttribute("visible", "true")

            obj.remove();    
            
          }
                    

        });
      }
    })


    function medicalClothe(element) {
      element.setAttribute("visible", "false")
      let obj = document.getElementById("e-Clothed_Instruments_Vesical")
      obj.setAttribute("animation-mixer", "loop:once;repetitions: NaN;clampWhenFinished:true")

      var delayInMilliseconds = 9000; //1 second

      setTimeout(function () {
        obj.setAttribute("visible", "false")
        document.getElementById("e-SterileField_Folded").setAttribute("visible", "true")
        document.getElementById("e-Bowl-Medic").setAttribute("visible", "true")
        document.getElementById("e-Bowl-Medic-2").setAttribute("visible", "true")
        document.getElementById("e-gauze").setAttribute("visible", "true")
        document.getElementById("e-Gauze_Pene").setAttribute("visible", "true")
        // document.getElementById("e-Stray").setAttribute("visible","true")
        document.getElementById("e-Clothed_Instruments_Vesical_Static").setAttribute("visible", "true")


      }, delayInMilliseconds);
    }

    changeGloveColor = 0;

    function playAnimation(e) {
 
      if (changeGloveColor < 3) {
        let obj = document.getElementById("e-Gloves_Steril")
        obj.setAttribute("animation-mixer", "loop:once;repetitions: NaN")
        console.log("hand event: ", window.event)
        changeGloveColor++
        // document.getElementById("e-waterglass").setAttribute("visible", "true") 

      } else {
        console.log("event", window.event)
        if (window.event.relatedTarget.id == "lhand") {
          let hand = document.getElementById("leftHand").getObject3D("mesh").getObjectByName("handL2320").material.color = new THREE.Color(0xe38666);
          console.log("hand: ", hand)
        } else if (window.event.relatedTarget.id == "rhand") {
          let hand = document.getElementById("rightHand").getObject3D("mesh").getObjectByName("handR2320").material.color = new THREE.Color(0xe38666);
          console.log("right hand: ", hand)

        }
      }
    }

  </script>

  <script>

    function setMass() {
      let intracathInteract = element = document.getElementById("vxr-intracath-second-part")
      intracathInteract.setAttribute('dynamic-body', 'mass:0.1')
    }

    function genericSetMass(element) {
      document.getElementById(element.id).setAttribute('dynamic-body', 'mass:0.1')
    }

    function genericBone(boneName) {
      console.log("bone id", boneName)
      // let bone  = document.getElementById(boneName)
      boneName.setAttribute('dynamic-body', 'mass:0.1')
      boneName.setAttribute("boneposition", "varBool:true")

    }

    function genericBoneEnd(boneName) {
      console.log("bone id", boneName)
      // let bone  = document.getElementById(boneName)
      boneName.setAttribute('dynamic-body', 'mass:0.0')
      boneName.setAttribute("boneposition", "varBool:false")
    }

    function setMassRubber() {
      let rubber = document.getElementById("Static-vxr-obj-rubber")
      rubber.setAttribute('dynamic-body', 'mass:0.1')
    }

    function emissiveObjectOn(element) {
      let emissiveObject = document.getElementById((element.id + "_emisive"))
      console.log("emisive id: ", (element.id + "_emisive"))
      emissiveObject.setAttribute("visible", "true")

      //let arrowTargetPosition = new THREE.Vector3()
      //arrowTargetPosition.copy(emissiveObject.getObject3D("mesh").getWorldPosition())
      //arrowTargetPosition.y = arrowTargetPosition.y + 0.3
      //document.getElementById("arrow01").setAttribute("position", arrowTargetPosition)
      //document.getElementById("arrow01").setAttribute("visible", "true")


      if (element.id == "e-SterileField_Folded") {
        element.setAttribute("dynamic-body", "mass:0.1")
      }
      if (element.id == "e-Basin") {
        let arrow01 = document.getElementById('arrow01')
        arrow01.setAttribute('visible', 'true')
      }
    }

    function emissiveObjectOff(element) {

      let emissiveObject = document.getElementById((element.id + "_emisive"))
      //document.getElementById("arrow01").setAttribute("visible", "false")


      if (document.getElementById((element.id + "_emisive"))) {
        emissiveObject.setAttribute("visible", "false")
      }

      if (element.id == "e-Basin") {
        let arrow01 = document.getElementById('arrow01')
        arrow01.setAttribute('visible', 'false')
      }
    }


  </script>



  <script>

    function setMassHeparinseal() {
      let boxheparin = document.getElementById("e-heparinseal-box")
      boxheparin.removeAttribute("dynamic-body")
      boxheparin.setAttribute("animation-mixer", "loop:once;repetitions:once;clampWhenFinished:true")
      let parina = document.getElementById("e-heparinseal")
      parina.setAttribute("dynamic-body", "")
      this.el.remove()

      // let baby = element = document.getElementById("baby")
      // Manta_Abierta.setAttribute("visible", "true")
      // baby.setAttribute('dynamic-body', 'mass:100.1;')
    }

    function SetObjectPosition(evt) {
      console.log("object: ", evt.path[0].getAttribute("position"))
      let position = new THREE.Vector3(evt.path[0].getAttribute("position").x)
      let x = evt.path[0].getAttribute("position").x
      let y = evt.path[0].getAttribute("position").y
      let z = evt.path[0].getAttribute("position").z

      evt.path[0].setAttribute("ground-collider", `x:${x}`)
      evt.path[0].setAttribute("ground-collider", `y:${y}`)
      evt.path[0].setAttribute("ground-collider", `z:${z}`)
      console.log("card grabbed: ", position)
    }

  </script>


  <script>

    AFRAME.registerComponent('ground-collider', {
      schema: {
        vectorPosition: {type:'vec3'   },
        x: {default: 0},
        y: {default: 0},
        z: {default: 0},
      },

      init: function () {
        let el = this.el;
        let data = this.data
        this.el.addEventListener('collide', function (e) {
          console.log('collision ', e.detail.body.el);

          let classes = e.detail.body.el.className.split(' ')

          if (classes.includes("vxr-ground")) {
            console.log("entity: ", this.el)
            el.removeAttribute("dynamic-body")
            el.setAttribute("position", {x:data.x, y:data.y, z:data.z})
             el.setAttribute("dynamic-body", "")
 
          } else {
            console.log('Error on: ', e.detail.body.el);

          }

        });
      },

      update: function () {
        console.log("x position: ", this.data.x)
        console.log("y position: ", this.data.y)
        console.log("z position: ", this.data.z)
        // this.el.removeAttribute("dynamic-body")
        // this.el.setAttribute("position",this.data.vectorPosition)
        // this.el.setAttribute("dynamic-body","")
      }
    })

  </script>


  <script>
    AFRAME.registerComponent('attach-point-axis', {
      init: function () {
        var el = this.el;
        this.el.addEventListener('collide', function (e) {
          console.log('Cube has collided with ', e.detail.body.el);
          e.detail.body.el.setAttribute('constraint', 'type: coneTwist; target: #box1; pivot: 0 0 0; targetPivot: 0 0.0 0.09; axis: 0.0 0.0 -1.0; targetAxis: 1.0 0.0 0.0');
        });
      }
    })
  </script>
  <script>
    AFRAME.registerComponent('foo', {
      init: function () {
        var el = this.el;
        this.el.addEventListener('collide', function (e) {
          console.log('Cube has collided with ', e.detail.body.el);
          e.detail.body.el.setAttribute('constraint', 'type: coneTwist; target: #box2; pivot: 0 0 0; targetPivot: 0 -0.05 0; axis: 0.0 -1 0; targetAxis: 1.0 0.0 0.0');
        });
      }
    })

    AFRAME.registerComponent('blend-shape', {
      init: function () {

        this.el.addEventListener('model-loaded', e => {
          document.getElementById("patient01").getObject3D("mesh").children[0].children[3].morphTargetInfluences[0] = 0.8
        })

      }
    })

    AFRAME.registerComponent('ao-map', {
      schema: {
        src: {default: ''}
      },
      init: function () {
        console.log('AO MAP!');
        var aoMap = new THREE.TextureLoader().load(this.data.src);
        aoMap.flipY = false;
        this.el.addEventListener('model-loaded', function(e) {
          e.detail.model.traverse((o) => {
            if (o.isMesh) {
              o.material.aoMap = aoMap;
              if (o.geometry.attributes.uv2 === undefined &&  
                  o.geometry.attributes.uv !== undefined) {
                  o.geometry.addAttribute( 'uv2', new THREE.BufferAttribute( o.geometry.attributes.uv.array, 2 ) );
                }
            }
          });
        });
        
      }
    });

  </script>
  <script>
    function spawnentity() {

      let syncs = document.getElementsByClassName("syncup");
      let constraint_avatar_template = document.getElementsByClassName("constraint-avatar-template");
      for (let i = 0; i < syncs.length; ++i) {
        syncs[i].setAttribute("networked", "template:#vxr-template;attachTemplateToLocal:true")
      }
      for (let i = 0; i < constraint_avatar_template.length; ++i) {
        constraint_avatar_template[i].setAttribute("networked", "template:#constraint-avatar-template;attachTemplateToLocal:true")
      }
    }
  </script>
  <!-- <link rel="stylesheet" type="text/css" href="../../super/process/assets/examples.css"> -->
</head>

<body>
  <a-scene physics="debug: false; gravity: -5; iterations: 75" networked-scene="
      room: audio;
      adapter: easyrtc;
      audio: false;
      debug: true;
      onConnect: spawnentity">
      
    <a-assets>
      <a-asset-item id="table" src="../../Models/room/Table.gltf"></a-asset-item>
      <a-asset-item id="bed" src="../../Models/process8/Baby_Crib.gltf"></a-asset-item>
      <a-asset-item id="patient" src="../../Models/process8/Baby_Bryan_Posed.gltf"></a-asset-item>
      <a-asset-item id="patient_emisive" src="../../Models/process8/Baby_Bryan_Posed_emisive.gltf"></a-asset-item>
      <a-asset-item id="patient_static" src="../../Models/process8/Baby_Bryan_Posed_static.gltf"></a-asset-item>
      <a-asset-item id="container" src="../../Models/process8/TrashContainer.gltf"></a-asset-item>
      <a-asset-item id="containerblack" src="../../Models/process8/TrashContainerBlack.gltf"></a-asset-item>
      <a-asset-item id="trashcan" src="../../Models/process8/TrashCan.gltf"></a-asset-item>
      <a-asset-item id="trashcan02" src="../../Models/process8/Box_SharpObject.gltf"></a-asset-item>
      <a-asset-item id="trashcan03" src="../../Models/process8/TrashCan02.gltf"></a-asset-item>
      <a-asset-item id="DestiledWater" src="../../Models/process8/DestiledWater.gltf"></a-asset-item>
      <a-asset-item id="Vaseline" src="../../Models/process8/Vaseline.gltf"></a-asset-item>
      <a-asset-item id="thermic" src="../../Models/process8/Thermic_Crib.gltf"></a-asset-item>
      <a-asset-item id="infantScale" src="../../Models/process8/Infant_Scale.gltf"></a-asset-item>
      <a-asset-item id="inkpad" src="../../Models/process8/InkPad.gltf"></a-asset-item>
      <a-asset-item id="toiletpaper" src="../../Models/process8/ToiletPaper.gltf"></a-asset-item>
      <a-asset-item id="Thermometer" src="../../Models/process8/Thermometer.gltf"></a-asset-item>
      <a-asset-item id="hyssop" src="../../Models/process8/Hyssop.gltf"></a-asset-item>
      <a-asset-item id="HairComb" src="../../Models/process8/HairComb.gltf"></a-asset-item>
      <a-asset-item id="bulbSyringe" src="../../Models/process8/Bulb_Syringe.gltf"></a-asset-item>
      <a-asset-item id="Clamp" src="../../Models/process8/Clamp.gltf"></a-asset-item>
      <a-asset-item id="Towel" src="../../Models/process8/Towel.gltf"></a-asset-item>
      <a-asset-item id="Plantares" src="../../Models/process8/Plantares.gltf"></a-asset-item>
      <a-asset-item id="PlantaresL" src="../../Models/process8/PlantaresLeft.gltf"></a-asset-item>
      <a-asset-item id="PlantaresR" src="../../Models/process8/PlantaresRight.gltf"></a-asset-item>
      <a-asset-item id="Panal" src="../../Models/process8/Pañal_Abrido.gltf"></a-asset-item>
      <a-asset-item id="HandLamp" src="../../Models/process8/HandLamp.gltf"></a-asset-item>
      <a-asset-item id="VitaminAmpoule" src="../../Models/process8/VitaminAmpoule.gltf"></a-asset-item>
      <a-asset-item id="Gloves_Steril_close" src="../../Models/process8/Gloves_Steril_Open.gltf"></a-asset-item>
      <a-asset-item id="Gloves_Steril_open_emisive" src="../../Models/process8/Gloves_Steril_Open_emisive.gltf"></a-asset-item>
      <a-asset-item id="Gloves_Steril" src="../Process3/Assets/Gloves_Anim.gltf"></a-asset-item>
      <a-asset-item id="alcohol" src="../../Models/gltf/AlcoholBottle2.gltf"></a-asset-item>
      <a-asset-item id="emptywaterglass" src="../../Models/process8/EmptyWatterGlass.gltf"></a-asset-item>
      <a-asset-item id="waterglass" src="../../Models/process8/WatterGlass.gltf"></a-asset-item>
      <a-asset-item id="cloranfenicol" src="../../Models/process8/Cloranfenicol.gltf"></a-asset-item>
      <a-asset-item id="scissors" src="../../Models/process8/CurvedScissor.gltf"></a-asset-item>
      <a-asset-item id="brazalet" src="../../Models/process8/IdentificationBrazalet.gltf"></a-asset-item>


      <img id="sky-01" src="../../Models/Images/sky-01.jpg">
      
      <a-asset-item id="tray" src="../../super/process/assets/Tray.gltf"></a-asset-item>
      <a-asset-item id="StudentAvatar" src="../../super/process/assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="SpectatorAvatar" src="../../super/process/assets/avatars/SpectatorAvatar.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatar" src="../../super/process/assets/TeacherAvatar.gltf"></a-asset-item>
      <a-asset-item id="right-hand" src="../../super/process/assets/rightHandHigh.glb"></a-asset-item>
      <a-asset-item id="left-hand" src="../../super/process/assets/leftHandHigh.glb"></a-asset-item>
      <a-asset-item id="dripbag" src="../../Models/gltf/DripBag.gltf"></a-asset-item>
      <a-asset-item id="rubber" src="../../Models/gltf/Rubber.gltf"></a-asset-item>
      <a-asset-item id="medicaltape" src="../../Models/gltf/MedicalTape.gltf"></a-asset-item>
      <a-asset-item id="gauze" src="../../Models/gltf/Gauze.gltf"></a-asset-item>
      <a-asset-item id="allistweezers" src="../../Models/gltf/Scissor_Buttoned.gltf"></a-asset-item>
      <a-asset-item id="cottonswab" src="../../Models/gltf/CottonSwabs01.gltf"></a-asset-item>
      <a-asset-item id="salinebottle" src="../../Models/gltf/ClorhexidinaBottle.gltf"></a-asset-item>
      <a-asset-item id="alcoholgel" src="../../Models/gltf/AlcoholGel.gltf"></a-asset-item>
      <a-asset-item id="MedicalClothe" src="../../Models/gltf/MedicalClothe.gltf"></a-asset-item>
      <a-asset-item id="Bowl_Medic" src="../../Models/gltf/Bowl_Medic.gltf"></a-asset-item>
      <a-asset-item id="Tape_Normal" src="../../Models/gltf/Tape_Normal.gltf"></a-asset-item>
      <a-asset-item id="Tape_Bow" src="../../Models/gltf/Tape_Bow.gltf"></a-asset-item>
      <a-asset-item id="Tape_Butterfly" src="../../Models/gltf/Tape_Butterfly.gltf"></a-asset-item>
      <a-asset-item id="Syringe_1CC_Skin" src="../../Models/gltf/Syringe_1CC.gltf"></a-asset-item>
      <a-asset-item id="ControlCard_Neonatal" src="../../Models/gltf/ControlCard_Neonatal.gltf"></a-asset-item>
      <a-asset-item id="SalineAmpoule" src="../../Models/process8/SalineAmpoule.gltf"></a-asset-item>
      <a-asset-item id="Syringe_plug" src="Syringe_plug.gltf"></a-asset-item>
      <a-asset-item id="Syringe_1CC" src="../../Models/gltf/Syringe_1CC.gltf"></a-asset-item>
      <a-asset-item id="Aposito_BabyPatient3" src="../../Models/process8/Aposito_BabyPatient3.gltf"></a-asset-item>
      <a-asset-item id="Aposito_BabyPatient3_Static" src="../../Models/process8/Aposito_BabyPatient3_Static.gltf"></a-asset-item>
      <a-asset-item id="heparinseal" src="../../Models/gltf/HeparinSeal.gltf"></a-asset-item>
      <a-asset-item id="HeparineSealBox" src="../../Models/process8/HeparineSealBox.gltf"></a-asset-item>
      <a-asset-item id="genes" src="../../Models/room/HospitalRoomLight.gltf"></a-asset-item>
      <a-asset-item id="s_cube" src="../../Models/process8/CottonColor.gltf"></a-asset-item>
      <a-asset-item id="Assistant_Nurse" src="../../Models/process8/AssitantNurse.gltf"></a-asset-item>

      <a-asset-item id="Armario" src="../HospitalRoomAssets/armario.gltf"></a-asset-item>
      <a-asset-item id="Mesacama" src="../HospitalRoomAssets/mesa_cama.gltf"></a-asset-item>
      <a-asset-item id="Sillon" src="../HospitalRoomAssets/sillon.gltf"></a-asset-item>
      <a-asset-item id="Sofa" src="../HospitalRoomAssets/sofa.gltf"></a-asset-item>
      <a-asset-item id="Table_004" src="../HospitalRoomAssets/Table_004.gltf"></a-asset-item>

      <!-- Avatars -->
      <a-asset-item id="StudentAvatarHead" src="../../super/process/assets/avatars/StudentAvatarHead.gltf">
      </a-asset-item>
      <a-asset-item id="StudentAvatarBody" src="../../super/process/assets/avatars/StudentAvatarBody.gltf">
      </a-asset-item>
      <a-asset-item id="TeacherAvatarHead" src="../../super/process/assets/avatars/TeacherAvatarHead.gltf">
      </a-asset-item>
      <a-asset-item id="TeacherAvatarBody" src="../../super/process/assets/avatars/TeacherAvatarBody.gltf">
      </a-asset-item>
      <a-asset-item id="student" src="../../super/process/assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="teacher" src="../../super/process/assets/TeacherAvatar.gltf"></a-asset-item>


      <canvas id="cam2"></canvas>


      <a-mixin id="touch" physics-collider phase-shift collision-filter="collisionForces: false"
        static-body="shape: sphere; sphereRadius: 0.02" super-hands="colliderEvent: collisions;
                          colliderEventProperty: els;
                          colliderEndEvent: collisions;
                          colliderEndEventProperty: clearedEls;">
      </a-mixin>
      <a-mixin id="point" raycaster="showLine: true; objects: .vxr-interact" collision-filter="collisionForces: false"
        static-body="shape: sphere; sphereRadius: 0.001" super-hands="colliderEvent: raycaster-intersection;
                    colliderEventProperty: els;
                    colliderEndEvent:raycaster-intersection-cleared;
                    colliderEndEventProperty: clearedEls;"></a-mixin>

      <!-- Player -->
      <template id="player-template">
        <a-entity networked-audio-source="positional:false"></a-entity>
      </template>
      ​
      <!-- Nurse Avatar -->
      <template id="student-avatar-template">
        <a-entity class="NurseHeadAvatar" gltf-model="#StudentAvatar" position="0 2 0"
          networked-audio-source="positional:false"></a-entity>

      </template>

      <!-- Teacher Avatar -->
      <template id="teacher-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#TeacherAvatar" scale="0.8 0.8 0.8"
          networked-audio-source="positional:false">
        </a-entity>
      </template>

      <!-- Spectator Avatar -->
      <template id="spectator-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#SpectatorAvatar" networked-audio-source="positional:false">
        </a-entity>
      </template>

      <!-- Teacher Avatar Constraints -->
      <template id="constraint-teacher-avatar-template">
        <a-entity>
          <a-entity class="name-up-teacher"></a-entity>
          <a-entity class="TeacherAvatar" id="teacher" gltf-model="#teacher"></a-entity>
        </a-entity>
      </template>

      <!-- Student Avatar Constraints -->
      <template id="constraint-student-avatar-template">
        <a-entity>
          <a-entity class="name-up-student"></a-entity>
          <a-entity class="StudentAvatar" id="student" gltf-model="#student"></a-entity>
        </a-entity>
      </template>

      <!-- Spectator Avatar Constraints -->
      <template id="constraint-spectator-avatar-template">
        <a-entity>
          <a-entity class="name-up"></a-entity>
          <a-entity class="SpectatorAvatar" id="spectator" gltf-model="#SpectatorAvatar"></a-entity>
      </template>

      <!-- Right Hand -->
      <template id="right-hand-template">
        <a-entity>
          <a-entity scale="0.8 0.8 0.8" gltf-model="#right-hand"></a-entity>
        </a-entity>
      </template>

      <!-- Left Hand -->
      <template id="left-hand-template">
        <a-entity>
          <a-entity scale="0.8 0.8 0.8" gltf-model="#left-hand"></a-entity>
        </a-entity>
      </template>

      <!-- vxr-template -->
      <template id="vxr-template">
        <a-entity>
          <a-box class="vxr-obj-a" rotator="speed:-2" width="0.35" height="0.35" depth="0.35" rotation="0 0 0"
            color="green" position="0 0 0"></a-box>
          <a-sphere class="vxr-obj-b" toggle-physics color="#f00" dynamic-body draggable grabbable radius="0.18"
            position="0.5 0 0"></a-sphere>
          <a-box class="vxr-obj-c" rotator="speed:2" color="blue" width="0.35" height="0.35" depth="0.35"
            position="1 0 0"></a-box>
        </a-entity>
      </template>

      <!-- vxr-gltf -->

      <template id="vxr-obj-template">
        <a-entity>
          <a-entity id="e-maskn95" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-maskn95 vxr-interact" gltf-model="#maskn95" draggable grabbable toggle-physics
            position="-0.53715 0.43992 -0.36489"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-2">
        <a-entity>
          <a-entity id="e-alcoholbottle" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-alcoholbottle vxr-interact" gltf-model="#alcoholbottle" draggable grabbable toggle-physics
            position="-0.46644 0.40663 0.04155"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-DestiledWater">
        <a-entity>
          <a-entity id="e-DestiledWater" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-DestiledWater vxr-interact" gltf-model="#DestiledWater" grabbable dynamic-body toggle-physics
            position="0.8126 0.40495 0.26584" rotation="0 90 0" ao-map="src: ../HospitalRoomAssets/lightmaps/AOMap_destilewater.png">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-3">
        <a-entity>
          <a-entity id="e-Stray" grabbable="maxGrabbers: NaN" class="vxr-obj-tray vxr-interact" gltf-model="#tray"
            draggable grabbable position="1.4909 0.39576 0.15153"></a-entity>
        </a-entity>
      </template>
      <template id="vxr-obj-template-rubber">
        <a-entity>
          <a-entity id="e-rubber" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-rubber vxr-interact" gltf-model="#rubber" dynamic-body draggable grabbable toggle-physics
            position="1.05099 0.43362 -0.01239" scale="0.8 0.8 0.8"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-dripbag">
        <a-entity>
          <a-entity id="e-dripbag" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-dripbag vxr-interact" gltf-model="#dripbag" dynamic-body draggable grabbable toggle-physics
            position="-1.61 0.5 -0.30"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-medicaltape">
        <a-entity>
          <a-entity id="e-medicaltape" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-medicaltape vxr-interact" gltf-model="#medicaltape" dynamic-body
            draggable grabbable toggle-physics position="1.65211 0.405 0.2475"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-gauze01">
        <a-entity>
          <a-entity id="e-gauze01" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-gauze01 vxr-interact" gltf-model="#gauze" dynamic-body draggable grabbable toggle-physics
            position="1.64888 0.40811 0.15552"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-gauze02">
        <a-entity>
          <a-entity id="e-gauze02" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-gauze02 vxr-interact" gltf-model="#gauze" dynamic-body draggable grabbable toggle-physics
            position="1.56313 0.40811 0.15718"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-gauze03">
        <a-entity>
          <a-entity id="e-gauze03" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-gauze03 vxr-interact" gltf-model="#gauze" dynamic-body draggable grabbable toggle-physics
            position="1.47444 0.40811 0.15616"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-toiletpaper01">
        <a-entity>
          <a-entity id="e-toiletpaper01" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-toiletpaper01 vxr-interact" gltf-model="#toiletpaper" dynamic-body draggable grabbable toggle-physics
            position="1.6513 0.40782 0.06456"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-toiletpaper02">
        <a-entity>
          <a-entity id="e-toiletpaper02" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-toiletpaper02 vxr-interact" gltf-model="#toiletpaper" dynamic-body draggable grabbable toggle-physics
            position="1.57548 0.41342 0.06405"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-toiletpaper03">
        <a-entity>
          <a-entity id="e-toiletpaper03" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-toiletpaper03 vxr-interact" gltf-model="#toiletpaper" dynamic-body draggable grabbable toggle-physics
            position="1.47576 0.41243 0.06779"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-thermometer">
        <a-entity>
          <a-entity id="e-thermometer" rotation="0 180 90" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-thermometer vxr-interact" gltf-model="#Thermometer" dynamic-body draggable grabbable toggle-physics
            position="1.29366 0.40797 0.18234"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-hyssop01">
        <a-entity>
          <a-entity id="e-hyssop01" rotation="0 180 90" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-hyssop01 vxr-interact" gltf-model="#hyssop" dynamic-body draggable grabbable toggle-physics
            position="1.36358 0.41798 0.19105"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-hyssop02">
        <a-entity>
          <a-entity id="e-hyssop02" rotation="0 180 90" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-hyssop02 vxr-interact" gltf-model="#hyssop" dynamic-body draggable grabbable toggle-physics
            position="1.34208 0.40851 0.19301"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-haircomb">
        <a-entity>
          <a-entity id="e-haircomb" rotation="0 0 0.000009555253088978258" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-haircomb vxr-interact" gltf-model="#HairComb" dynamic-body draggable grabbable
            toggle-physics position="0.82798 0.40711 -0.00349"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-bulbsyringe">
        <a-entity>
          <a-entity id="e-bulbsyringe" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-bulbsyringe vxr-interact" gltf-model="#bulbSyringe" dynamic-body draggable grabbable
            toggle-physics position="1.02593 0.45619 0.12036"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-clamp01">
        <a-entity>
          <a-entity id="e-clamp01" scale="1.2 1.2 1.2" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-clamp01 vxr-interact" gltf-model="#Clamp" dynamic-body draggable grabbable
            toggle-physics position="1.406 0.406 0.139"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-clamp02">
        <a-entity>
          <a-entity id="e-clamp02" scale="1.2 1.2 1.2" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-clamp02 vxr-interact" gltf-model="#Clamp" dynamic-body draggable grabbable
            toggle-physics position="1.406 0.406 0.205"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-towel01">
        <a-entity>
          <a-entity id="e-towel01" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-towel01 vxr-interact" gltf-model="#Towel" dynamic-body draggable grabbable
            toggle-physics position="1.651 0.408 -0.126" ao-map="src: ../HospitalRoomAssets/lightmaps/AOMap_towel.png"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-brazalet">
        <a-entity>
          <a-entity id="e-brazalet" rotation="0 0 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-brazalet vxr-interact" gltf-model="#brazalet" dynamic-body draggable grabbable
            toggle-physics position="1.258 0.408 -0.126"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-plantares">
        <a-entity>
          <a-entity id="e-plantares" rotation="0 180 0" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-plantares vxr-interact" gltf-model="#Plantares" dynamic-body draggable grabbable scale="0.8 0.8 0.8"
            toggle-physics position="2.38176 0.3212 -2.31"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-panal">
        <a-entity>
          <a-entity id="e-panal" rotation="3.26843619051026e-7 4.4261780338585825e-11 0.000005336236058081397" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-plantares vxr-interact" gltf-model="#Panal" dynamic-body draggable grabbable
            toggle-physics position="0.02603 0.406 0.1477"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Gloves_Steril_close">
        <a-entity>
          <a-entity id="e-Gloves_Steril_close" grabbable="maxGrabbers: NaN"
            rotation="0 180 0" grabbable class="vxr-obj-Gloves_Steril_close vxr-interact" gltf-model="#Gloves_Steril_close" scale="0.6 0.6 0.6"
            draggable grabbable dynamic-body="sphereRadius: NaN" grabbable dynamic-body toggle-physics position="0.254 0.407 0.140">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Gloves_Steril">
        <a-entity>
          <a-entity id="e-Gloves_Steril" scale="0.7 0.7 0.7" grabbable="maxGrabbers: NaN" visible="false"  
            rotation="0 180 0" grabbable class="vxr-obj-Gloves_Steril vxr-interact" gltf-model="#Gloves_Steril" 
            draggable grabbable  position="0.145 0.402 -0.105">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-allistweezers">
        <a-entity>
          <a-entity id="e-allistweezers" rotation="0.0000034894693822802636 -179.999999999382 0.000007960372193386952" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-allistweezers vxr-interact" gltf-model="#scissors" dynamic-body draggable grabbable
            toggle-physics position="1.15706 0.4094 -0.13162"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab01">
        <a-entity>
          <a-entity id="e-cottonswab01" grabbable="maxGrabbers: NaN" dynamic-body="shape: box; sphereRadius: NaN"
            class="vxr-obj-cottonswab01 vxr-interact" gltf-model="#s_cube" dynamic-body draggable grabbable
            toggle-physics position="1.17819 0.41612 0.08156" rotation="180 0 0">


          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab02">
        <a-entity>
          <a-entity id="e-cottonswab02" grabbable="maxGrabbers: NaN" dynamic-body="shape: box; sphereRadius: NaN"
            class="vxr-obj-cottonswab02 vxr-interact" gltf-model="#cottonswab" dynamic-body draggable grabbable
            toggle-physics position="1.17985 0.41612 0.11441" visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab03">
        <a-entity>
          <a-entity id="e-cottonswab03" rotation="-0.000001471664816786311 1.7016355847281638e-7 0.00002242123881483989"
            grabbable="maxGrabbers: NaN" dynamic-body="shape: box; sphereRadius: NaN" class="vxr-obj-cottonswab03 vxr-interact"
            gltf-model="#cottonswab" dynamic-body draggable grabbable toggle-physics position="1.148 0.41612 0.08039"
            visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-cottonswab04">
        <a-entity>
          <a-entity id="e-cottonswab04" rotation="-0.000001471664816786311 1.7016355847281638e-7 0.00002242123881483989"
            grabbable="maxGrabbers: NaN" dynamic-body="shape: box; sphereRadius: NaN" class="vxr-obj-cottonswab04 vxr-interact"
            gltf-model="#cottonswab" dynamic-body draggable grabbable toggle-physics position="1.1497 0.41612 0.11527"
            visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-salinebottle">
        <a-entity>
          <a-entity id="e-salinebottle" rotation="8.414333427626106e-7 8.857917797911296e-11 0.000022061128539749063"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-salinebottle vxr-interact"
            gltf-model="#salinebottle" dynamic-body draggable grabbable toggle-physics
            position="0.9255 0.40336 0.26832"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-alcoholgel">
        <a-entity>
          <a-entity id="e-alcoholgel" rotation="-0.000007477635997961198 3.8917617689839617e-10 0.000015630321302724323"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-alcoholgel vxr-interact"
            gltf-model="#alcohol" dynamic-body draggable grabbable toggle-physics position="1.03375 0.40663 0.26484">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-heparinseal">
        <a-entity>
          <a-entity id="e-heparinseal" grabbable="maxGrabbers: NaN" class="vxr-obj-heparinseal vxr-interact"
            gltf-model="#heparinseal" draggable grabbable rotation="0 0 -90" position="1.39366 0.424 0.23699"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-heparinseal-box">
        <a-entity>
          <a-entity id="e-heparinseal-box" dynamic-body="sphereRadius: NaN" rotation="9.646729492324354e-10 -9.44282748249421e-9 0.00014024550516111676"
            grabbable="maxGrabbers: NaN" class="vxr-obj-heparinsealbox vxr-interact" gltf-model="#HeparineSealBox"
            dynamic-body draggable grabbable position="1.45417 0.426 0.2347">

          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracath">
        <a-entity>
          <a-entity id="e-intracath" rotation="0.000006411976202429251 -180 0.00008383539833977058"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-intracath vxr-interact"
            gltf-model="#intracath" dynamic-body draggable grabbable toggle-physics position="0.22124 0.41186 -0.0272">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracath-piece-1">
        <a-entity>
          <a-entity id="e-intracath-piece-1" id="firstPart" class="vxr-obj-intracath-piece-1 vxr-interact"
            gltf-model="#intracath-piece-1" draggable="" grabbable="; maxGrabbers: NaN" position="0.76381 0.53849 -0.75531"
            rotation="-45 0 0" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-intracath-piece-2">
        <a-entity>
          <a-entity id="vxr-intracath-second-part" grabbable="maxGrabbers: NaN" ondragstart="setMass()"
            class="vxr-obj-intracath-piece-2 vxr-interact" gltf-model="#intracath-piece-2" draggable grabbable
            position="0.76397 0.55084 -0.74266" rotation="-45 0 0" visible="false"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-MedicalClothe">
        <a-entity>
          <a-entity id="e-MedicalClothe" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-MedicalClothe vxr-interact" gltf-model="#MedicalClothe"
            toggle-physics="" draggable="" grabbable position="1.03049 0.42812 -0.16025"
            rotation="0.9638385276229728 -1.9129844754810412 -0.029232191109150304" velocity="" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Bowl-Medic01">
        <a-entity>
          <a-entity id="e-Bowl-Medic01" grabbable="maxGrabbers: NaN" class="vxr-obj-Bowl-Medic01 vxr-interact"
            gltf-model="#Bowl_Medic" draggable="" grabbable position="1.16405 0.40373 0.10091"
            static-body="shape:mesh; sphereRadius: NaN" scale="1.3 1.1 1.3"
            rotation="0 0 0">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-emptyglass">
        <a-entity>
          <a-entity id="e-emptyglass" grabbable="maxGrabbers: NaN" class="vxr-obj-emptyglass vxr-interact"
            gltf-model="#emptywaterglass" draggable="" grabbable position="1.17098 0.404 0.242"
            static-body="shape:mesh; sphereRadius: NaN" scale="1 1 1"
            rotation="0 0 0">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-waterglass">
        <a-entity>
          <a-entity id="e-waterglass" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" 
            class="vxr-obj-waterglass vxr-interact" gltf-model="#waterglass" grabbable dynamic-body visible="false" 
            grabbable position="1.17098 0.404 0.242" scale="1 1 1" dynamic-body draggable grabbable
            toggle-physics rotation="0 0 0">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Normal">
        <a-entity>
          <a-entity id="e-Tape-Normal" dynamic-body="sphereRadius: NaN" class="vxr-obj-Tape-Normal vxr-interact"
            gltf-model="#Tape_Normal" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
            position="1.32244 0.40609 0.04788" rotation="-0.00003465309403413762 5.889117070915113e-9 0.00022275971082987936" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Normal1">
        <a-entity>
          <a-entity id="e-Tape-Normal1" dynamic-body="sphereRadius: NaN" class="vxr-obj-Tape-Normal1 vxr-interact"
            gltf-model="#Tape_Normal" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
            position="1.38803 0.40609 0.04868" rotation="-0.00018339006526709044 0 0.000421624269738084" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Normal2">
        <a-entity>
          <a-entity id="e-Tape-Normal2" dynamic-body="sphereRadius: NaN" class="vxr-obj-Tape-Normal2 vxr-interact"
            gltf-model="#Tape_Normal" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
            position="1.3872 0.40609 0.08877" rotation="0 0 0" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Normal3">
        <a-entity>
          <a-entity id="e-Tape-Normal3" dynamic-body="sphereRadius: NaN" class="vxr-obj-Tape-Normal3 vxr-interact"
            gltf-model="#Tape_Normal" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
            position="1.35335 0.40609 0.09034" rotation="0 0 0" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Bow">
        <a-entity>

          <a-entity id="e-Tape-Bow" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-Tape-Bow vxr-interact" gltf-model="#Tape_Bow" toggle-physics="" draggable="" grabbable
            position="1.35293 0.40604 0.04895"
            rotation="-0.0001594819367406277 0 0" dynamic-body></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Tape-Butterfly">
        <a-entity>
          <a-entity id="e-Tape-Butterfly" dynamic-body="sphereRadius: NaN" class="vxr-obj-Tape-Butterfly vxr-interact"
            gltf-model="#Tape_Butterfly" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
            position="1.32297 0.4061 0.09012" rotation="0 0 0.00021745505327603267"
            dynamic-body></a-entity>

        </a-entity>
      </template>

      <template id="audience">
        <a-entity id="spectator" position="-2.9119 2.18025 -2.79791" assign-seat>
          <a-entity id="constraint-spectator" camera look-controls zoom="100" fov="120">
            <a-entity class="name-up" name-up></a-entity>
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-ControlCard_Neonatal">
        <a-entity>
          <a-entity id="e-ControlCard_Neonatal" grabbable="maxGrabbers: NaN" ground-collider
            dynamic-body="sphereRadius: NaN" class="vxr-obj-ControlCard_Neonatal vxr-interact" dynamic-body
            gltf-model="#ControlCard_Neonatal" draggable="" grabbable position="0.84368 0.405 -0.17231" visible="true"
            ondragstart="SetObjectPosition(event)">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-SalineAmpoule">
        <a-entity>
          <a-entity id="e-SalineAmpoule" rotation="0 150 0"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-SalineAmpoule vxr-interact"
            dynamic-body gltf-model="#SalineAmpoule" draggable="" grabbable position="1.40451 0.40495 0.271"
            visible="true">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-VitaminAmpoule">
        <a-entity>
          <a-entity id="e-VitaminAmpoule" rotation="0 150 0"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-VitaminAmpoule vxr-interact"
            dynamic-body gltf-model="#VitaminAmpoule" draggable="" grabbable position="1.376 0.40495 0.271" 
            visible="true" ao-map="src: ../HospitalRoomAssets/lightmaps/AOMap_vitaminAmpoule.png">
          </a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-cloranfenicol">
        <a-entity>
          <a-entity id="e-cloranfenicol" rotation="-3.58737825642155e-9 0 0.000042913881580116254"
            grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-cloranfenicol vxr-interact"
            dynamic-body gltf-model="#cloranfenicol" draggable="" grabbable position="1.3100000000077683 0.40501284151536154 0.2710000000061175" 
            visible="true">
          </a-entity>
        </a-entity>
      </template>


      <template id="vxr-obj-template-Syringe_1CC">
        <a-entity>
          <a-entity id="e-Tape-Syringe_1CC" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-Tape-Syringe_1CC vxr-interact" gltf-model="#Syringe_1CC" draggable=""
            grabbable="maxGrabbers: NaN" position="1.31066 0.4079 0.17727"
            rotation="0.000012370459158777697 -180 0.00007702397321174505"></a-entity>

        </a-entity>
      </template>

      <template id="vxr-obj-template-Aposito_BabyPatient3">
        <a-entity>
          <a-entity id="e-Aposito_BabyPatient3" static-body="sphereRadius: NaN"  
            class="vxr-obj-Aposito_BabyPatient3 vxr-interact" gltf-model="#Aposito_BabyPatient3" draggable=""
            grabbable="maxGrabbers: NaN" position="2.79779 0.26212 -1.17306" rotation="-5.320 0 0" visible="true"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Aposito_BabyPatient3-static">
        <a-entity>
          <a-entity id="e-Aposito_BabyPatient3-static" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-Aposito_BabyPatient3-static vxr-interact" gltf-model="#Aposito_BabyPatient3_Static"
            draggable="" grabbable="maxGrabbers: NaN" position="1.54716 0.40532 0.24443" rotation="0 0 0"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-vaseline">
        <a-entity>
          <a-entity id="e-vaseline" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN" class="vxr-obj-vaseline vxr-interact" gltf-model="#Vaseline"
            toggle-physics="" draggable="" grabbable position="0.92444 0.4046 0.12193" 
            rotation="" scale="2 2 2" dynamic-body></a-entity>
        </a-entity>
      </template>
      
      <template id="vxr-obj-template-HandLamp">
        <a-entity>
          <a-entity id="e-HandLamp" grabbable="maxGrabbers: NaN" dynamic-body="sphereRadius: NaN"
            class="vxr-obj-HandLamp vxr-interact" gltf-model="#HandLamp" dynamic-body draggable grabbable
            toggle-physics position="0.84386 0.41896 -0.09564"></a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-Assistant_Nurse">
        <a-entity>
          <a-entity id="e-Assistant_Nurse" grabbable="maxGrabbers: NaN" class="vxr-obj-Assistant_Nurse vxr-interact" gltf-model="#Assistant_Nurse"
            dynamic-body="mass:0.0; sphereRadius: NaN" toggle-physics draggable grabbable position="3.70401 -0.602 -1.17441"
            rotation="0 -90 0" dynamic-body></a-entity>
        </a-entity>
      </template>


      <template id="vxr-obj-template-patient01">
        <a-entity>
          <a-entity id="e-patient01"  ondragstart="emissiveObjectOn(this)" ondragend="emissiveObjectOff(this)"
            grabbable="maxGrabbers: NaN" rotation="0 0 0" dynamic-body="sphereRadius: NaN" grabbable dynamic-body
            class="vxr-obj-patient01 vxr-interact" gltf-model="#patient" draggable grabbable
            toggle-physics position="3.19147 0.71558 -1.24687">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-patient01_emisive">
        <a-entity>
          <a-entity id="e-patient01_emisive" grabbable="maxGrabbers: NaN" rotation="0 0 0" grabbable 
            class="vxr-obj-patient01_emisive vxr-interact" visible="false" gltf-model="#patient_emisive" draggable grabbable
            position="2.934 0.240 -1.345">
          </a-entity>
        </a-entity>
      </template>

      <template id="vxr-obj-template-patient01_static">
        <a-entity>
          <a-entity id="e-patient01_static" grabbable="maxGrabbers: NaN" rotation="0 0 0" grabbable 
            class="vxr-obj-patient01_static vxr-interact" visible="false" gltf-model="#patient_static" draggable grabbable
            position="2.934 0.240 -1.345">
          </a-entity>
        </a-entity>
      </template>


    </a-assets>

    <!-- Hidden Static Meshes  -->


    <a-entity id="static-heparinseal" class="vxr-obj-heparinseal vxr-interact" gltf-model="#heparinseal"
      position="0.76409 2.03313 -0.95815" rotation="45 -8.88624861371593e-9 0.00014024380116174428" visible="false">
    </a-entity>
    <a-entity id="StaticMedicalClothe" grabbable="maxGrabbers: NaN" class="vxr-obj-MedicalClothe vxr-interact"
      gltf-model="../../Models/gltf/MedicalClothe.gltf" toggle-physics="" draggable="" grabbable
      position="0.762 1.988 -1.002" rotation="12.42 67.43 -3.656" visible="false"></a-entity>

    <a-entity id="Static-Tape-Bow" class="vxr-obj-Tape-Bow vxr-interact" gltf-model="../../Models/gltf/Tape_Bow.gltf"
      toggle-physics="" draggable="" grabbable="; maxGrabbers: NaN" position="0.76446 2.0053 -0.99248"
      rotation="0.0017188733853924698 77.997 179.9998479605043" visible="false"></a-entity>
    <a-entity id="Static-Tape-Butterfly" grabbable="maxGrabbers: NaN" class="vxr-obj-Tape-Butterfly vxr-interact"
      gltf-model="../../Models/gltf/Tape_Butterfly.gltf" toggle-physics="" draggable="" grabbable
      position="0.7632 2.00579 -0.9882" rotation="0.4428963756361263 77.997 -177.91714637520374" visible="false"></a-entity>
    <a-entity id="Static-Tape-Normal" class="vxr-obj-Tape-Normal vxr-interact"
      gltf-model="../../Models/gltf/Tape_Normal.gltf" toggle-physics="" draggable="" grabbable="maxGrabbers: NaN"
      position="0.765 2.004 -0.994" rotation="-0.00002110992401797946 77.997 180" visible=false></a-entity>
    <a-entity id="Static-vxr-obj-rubber" grabbable="maxGrabbers: NaN" class="vxr-obj-rubber vxr-interact" gltf-model="../../Models/gltf/Rubber.gltf"
      draggable="" grabbable position="0.777 1.976 -1.029" scale="0.5 0.5 0.5" rotation="0 60.856 270" visible="false"
      ondragstart="setMassRubber()"></a-entity>




    <a-sky rotation="0 180 0" position="0 -70 0" src="#sky-01"></a-sky>
    <a-light id="directionallight" light="intensity: 0.2" type="directional" position="0 0 0" rotation="-90 0 0"
      intensity="0.200" target="#directionaltarget">
      <a-entity id="directionaltarget" position="0 0 -1"></a-entity>
    </a-light>
    <a-entity light="intensity: 0.3; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"
      id="ambientlight"></a-entity>
    <a-entity light="color: #FFFFFF; penumbra: 0.81; type: point; intensity: 0.2" id="light01"
      position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>



    <!-- Static Objects -->

    <!-- <a-entity id="tstTable" class="gltf" gltf-model="#table" position="-1.5 0.99273 -0.363" rotation="0 180 0">
    </a-entity> -->
    
    </a-entity>
    <a-entity id="bedBaby" gltf-model="#bed" scale="1 1 1" position="2.94421 0.89752 -1.41099" material="color: brown"
      rotation="0 90 0" ao-map="src: ../HospitalRoomAssets/lightmaps/AOMap_babycrib.png">
    </a-entity>

    <a-entity id="armario" gltf-model="#Armario" scale="" position="-0.12389 0.915 3.70804" rotation="0 -90 0" ao-map="src: ../HospitalRoomAssets/AOMap_armario.png">
    </a-entity>
    <a-entity id="mesacama" gltf-model="#Mesacama" scale="" rotation="0 -90 0" position="-1.34977 0.97098 3.82214" ao-map="src: ../HospitalRoomAssets/AOMap_mesacama.png">
    </a-entity>
    <a-entity id="sillon" gltf-model="#Sillon" scale="" rotation="0 180 0" position="3.75559 0.90537 2.4178" ao-map="src: ../HospitalRoomAssets/AOMap_sillon.png">
    </a-entity>
    <a-entity id="sofa" gltf-model="#Sofa" scale="" rotation="0 180 0" position="2.00436 0.90695 3.70236" ao-map="src: ../HospitalRoomAssets/AOMap_sofa.png">
    </a-entity>
    <a-entity id="table_004" gltf-model="#Table_004" scale="1 1.3 1.2" rotation="0 -90 0" position="2.3958 0.90812 -2.52664">
    </a-entity>
    <a-entity id="thermic_crib" gltf-model="#thermic" scale="" rotation="0 0 0" position="3.09452 0.90812 -0.03355" >
    </a-entity>
    <a-entity id="Infant_Scale" gltf-model="#infantScale" scale="" rotation="0 180 0" position="-0.36953 1.91789 -0.14487">
    </a-entity>
    <a-entity id="InkPad" gltf-model="#inkpad" scale="0.4 0.4 0.4" rotation="0 0 0" position="0.244 1.897 0.072">
    </a-entity>

    </a-entity>

    <a-entity class="gltf" gltf-model="#table" position="-0.13 1 -0.125" rotation="0 -90 0"></a-entity>
    <a-entity class="gltf" gltf-model="#table" position="1.239 1 -0.125" rotation="0 -90 0"></a-entity>

    <a-box id="boxTable1" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="-0.11878 1.855 -0.13324" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxTable2" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="1.239 1.855 -0.13324" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxTable3" static-body="sphereRadius: NaN" opacity="0" static-body rotation="" scale="0.628 0.520 0.709"
      position="-0.38635 2.033 -0.10337" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxTable4" static-body="sphereRadius: NaN" opacity="0" static-body rotation="" scale="0.745 0.742 0.900"
      position="3.037 1.689 -0.034" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxTable5" static-body="sphereRadius: NaN" opacity="0" static-body rotation="" scale="0.415 0.424 0.691"
      position="2.40341 1.8 -2.529" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    <a-box id="boxTable6" static-body="sphereRadius: NaN" opacity="0" static-body rotation="" scale="0.36293 0.424 0.95638"
      position="3.22839 2.10841 -1.35643" color="red" depth="0.6" height="0.1" width="1.1"></a-box>

    <a-box id="boxFloor" scale="4.14767 1 7.15846" static-body="sphereRadius: NaN" opacity="0" static-body rotation=""
      position="0.36093 0.85321 -0.37707" color="red" depth="0.6" height="0.1" width="1.1"></a-box>
    
    <!--Lights -->
    <a-entity background="color: #92f2ff"></a-entity>

    <a-entity light="intensity: 0.7; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"
      id="ambientlight"></a-entity>
    <a-entity light="color: #ffffff; penumbra: 0.81; type: point; intensity: 0.2" id="light01"
      position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>

    <a-entity id="player" networked="template:#player-template;attachTemplateToLocal:false;" position="0 0.8 -1.2"
      rotation="0 180 0" movement-controls="speed:0.3">
    <a-entity camera position="0 1.7 -0.6" look-controls zoom="100" fov="120"
        networked="template:#constraint-teacher-avatar-template;attachTemplateToLocal:false;">
    </a-entity>

    
      <!-- /VIVE CONTROLLERS -->
    <a-entity id="lhand" mixin="touch" hand-attach input-controls="hand: left"
        networked="template:#left-hand-template">
    </a-entity>
    <a-entity id="rhand" mixin="touch" hand-attach input-controls="hand: right"
        networked="template:#right-hand-template">
    </a-entity>
    </a-entity>

    <a-entity id="genes01" gltf-model="#genes" scale="1.2 1 1.2" position="0.14005 0.858 0.55534" material="color: brown"
      rotation="0 -90.000 0" shadow="receive: false"></a-entity>

    <a-entity id="container01" scale="0.9 0.9 0.9" position="-1.5 0.91541 -2.03" gltf-model="#container" 
      rotation="0 180 0"></a-entity>
    <a-entity id="container02" scale="0.9 0.9 0.9" position="-1.5 0.91541 -1.515" gltf-model="#containerblack" 
      rotation="0 180 0"></a-entity>
    <a-entity id="trash" scale="" position="-1.5 0.91541 -1.07954" gltf-model="#trashcan" 
      rotation="0 180 0"></a-entity>
    <a-entity id="trash02" scale="" position="-1.5 0.91541 -0.76456" gltf-model="#trashcan02" 
      rotation="0 90 0" ></a-entity>
    <a-entity id="trash03" scale="" position="-1.5 0.91541 -0.31542" gltf-model="#trashcan03" ao-map="src: ../HospitalRoomAssets/lightmaps/AOMap_trash.png"
      rotation="0 90 0"></a-entity>

    <a-box id="dragBox" dynamic-body="sphereRadius: NaN" dynamic-body geometry="width:0.03;height:0.03;depth:0.03" position="0.18823 1.92389 -0.326"
      opacity="0" ondragstart="setMassHeparinseal()">

    </a-box>


    <a-sphere id="heparinsealCollider" static-body="sphereRadius: NaN" attach-point-v2="objClass:vxr-obj-heparinseal"
      static-body attach-intracath opacity="0" position="0.85874 1.8186 -1.07677" geometry="radius: 0.02">
    </a-sphere>


    <a-box id="box2" static-body="sphereRadius: NaN" foo opacity="0" static-body rotation="0 180 0" position="0.95816 2.65 -2.07664" color="red"
      depth="0.03" height="0.03" width="0.03"></a-box>

    <!------------------------------------------------------------------------------------------------------------------->
    <!-----------------------------------------------Triggers------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------->

    <a-sphere id="sphere2" static-body="sphereRadius: NaN" static-body attach-intracath opacity="0" position="0.771 1.99849 -0.99278" attach-point-v2
      geometry="radius: 0.05">
    </a-sphere>
  
    <a-sphere id="sphere-water" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN" static-body
      trigger-animation="entity_id:e-DestiledWater;obj_entity:3" opacity="0" position="1.16957 2.00562 0.0416" attach-point-v2
      geometry="radius: 0.02"> </a-sphere>

    <a-sphere id="sphere-gloves-close" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN" static-body 
      trigger-animation="entity_id:e-Gloves_Steril_close;obj_entity:4" opacity="0" position="0.144 1.961 -0.321" attach-point-v2
      geometry="radius: 0.02"> </a-sphere>

    <a-sphere id="sphere-gloves-animation" visible="false" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN" static-body
      opacity="1" position="0.144 1.980 -0.321" ondragstart="playAnimation()" attach-point-v2
      geometry="radius: 0.04"> </a-sphere>

    <a-sphere id="sphere3" scale="0.5 0.5 0.5" static-body="sphereRadius: NaN" static-body
      trigger-animation="entity_id:e-patient01;obj_entity:2" opacity="0" position="2.93998 1.84784 -1.46151"
      attach-point-v2 geometry="radius: 0.05"> </a-sphere>



  </a-scene>

  <script>
    // Define custom schema for syncing avatar color, set by random-color
    NAF.schemas.add({
      template: '#student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#spectator-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#constraint-spectator-avatar-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.name-up',
          component: 'name-up'
        },
        {
          selector: '.SpectatorAvatar',
          component: 'randomize-spec-color'
        }
      ]
    });
    NAF.schemas.add({
      template: '#constraint-teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#constraint-student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#player-template',
      components: [
        'position',
        'rotation',
      ]
    });
    NAF.schemas.add({
      template: '#right-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#left-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });

    //Called by Networked-Aframe when connected to server
    function onConnect() {
      console.log("funca");
    }
  </script>
  <!-- <script src="../../js/Feature-SpawnTemplate.js"></script> -->

  <script src="../../js/Feature-SpawnObjects.js"></script>
  <!-- <script src="../../js/vxr-full-house.js"></script> -->



</body>

</html>